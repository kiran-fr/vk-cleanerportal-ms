"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CdkExampleStack = void 0;
const cdk = require("@aws-cdk/core");
const lambda = require("@aws-cdk/aws-lambda");
const alllambda_1 = require("./resources/lambda/alllambda");
const apigateway = require("@aws-cdk/aws-apigateway");
const ApiGatewayConstant_1 = require("../constants/ApiGatewayConstant");
const AllApiGateWays_1 = require("./resources/ApiGateway/AllApiGateWays");
const cognito = require("@aws-cdk/aws-cognito");
class CdkExampleStack extends cdk.Stack {
    // public readonly urlOutput: CfnOutput;
    constructor(scope, id, props) {
        super(scope, id, props);
        const userRegistration = new lambda.Function(this, "UserRegistration", alllambda_1.UserRegistrationLambda());
        const WorksManTermsAndCondition = new lambda.Function(this, "WorksManTermsAndCondition", alllambda_1.WorksManTermsAndConditionLambda());
        const WorksManExperience = new lambda.Function(this, "WorksManExperience", alllambda_1.WorksManExperienceLambda());
        const GetWorksmanAccountRegistartionStatus = new lambda.Function(this, "GetWorksmanAccountRegistartionStatus", alllambda_1.GetWorksmanAccountRegistartionStatusLambda());
        const getAllMobileNumbersDemo = new lambda.Function(this, "getAllMobileNumber", alllambda_1.getAllMobileNumberLambda());
        const GetWorkmanDetailLambda = new lambda.Function(this, "GetWorkmanDetails", alllambda_1.GetWorkmanDetailsLambda());
        const UpdateWorksmanDetailLambda = new lambda.Function(this, "UpdateWorksmanDetail", alllambda_1.UpdateWorksmanDetailsLambda());
        const UserPostCodeLambdaApi = new lambda.Function(this, "UserPostCodes", alllambda_1.UserPostCodesLambda());
        const GetAllPostcodesLambdaApi = new lambda.Function(this, "GetAllPostcodes", alllambda_1.GetAllPostcodesLambda());
        const DeletePostcodesLambdaApi = new lambda.Function(this, "DeletePostcodes", alllambda_1.DeletePostcodesLambda());
        const CreateWorksmanScheduleLambdaApi = new lambda.Function(this, "CreateWorksmanSchedule", alllambda_1.CreateWorksmanScheduleLambda());
        const DeleteWorkmanScheduleLambdaApi = new lambda.Function(this, "DeleteWorkmanSchedule", alllambda_1.DeleteWorkmanScheduleLambda());
        const GetWorksmanScheduleLambdaApi = new lambda.Function(this, "GetWorksmanSchedule", alllambda_1.GetWorksmanSchedulesLambda());
        const GetWorksmanjobsLambdaApi = new lambda.Function(this, "GetWorksmanjobs", alllambda_1.GetWorksmanjobsLambda());
        const WorksmanjobsCreateLambdaApi = new lambda.Function(this, "WorksmanjobsCreate", alllambda_1.WorksmanjobsCreateLambda());
        const CreateBankDetailsLambdaApi = new lambda.Function(this, "CreateBankDetails", alllambda_1.CreateBankDetailsLambda());
        const GetBankDetailsLambdaApi = new lambda.Function(this, "GetBankDetails", alllambda_1.GetBankDetailsLambda());
        const CreateMessagesLambdaApi = new lambda.Function(this, "CreateMessages", alllambda_1.CreateMessagesLambda());
        const GetMessagesLambdaApi = new lambda.Function(this, "GetMessages", alllambda_1.GetMessagesLambda());
        // const CreateCustomerTableLambdaApi = new lambda.Function(this, "CreateCustomerTable", CreateCustomerTableLambda())
        // const CreateCustomerAddressLambdaApi = new lambda.Function(this, "CreateCustomerAddress", CreateCustomerAddressLambda())
        const GetJobsLambdaApi = new lambda.Function(this, "GetJobs", alllambda_1.GetJobsLambda());
        const GetListOfJobsBasedOnMonthLambdaApi = new lambda.Function(this, "GetListOfJobsBasedOnMonth", alllambda_1.GetListOfJobsBasedOnMonthLambda());
        const GetPaymentDetailsLambdaApi = new lambda.Function(this, "GetPaymentDetails", alllambda_1.GetPaymentDetailsLambda());
        const CreatePaymentHistoryDetailsLambdaApi = new lambda.Function(this, "CreatePaymentHistoryDetails", alllambda_1.CreatePaymentHistoryDetailsLambda());
        const GetPaymentHistoryDetailsLambdaApi = new lambda.Function(this, "GetPaymentHistoryDetails", alllambda_1.GetPaymentHistoryDetailsLambda());
        const GetDistrictWisePostCodesLambdaApi = new lambda.Function(this, "GetDistrictWisePostCodes", alllambda_1.GetDistrictWisePostCodesLambda());
        const UpdateBankDetailsLambdaApi = new lambda.Function(this, "UpdateBankDetails", alllambda_1.UpdateBankDetailsLambda());
        const api = new apigateway.RestApi(this, "WorksmanApiData", ApiGatewayConstant_1.ApigatewayDataConstants(apigateway));
        const userPool = new cognito.UserPool(this, "userpool", {
            userPoolName: `vk-clean-portal`,
            removalPolicy: cdk.RemovalPolicy.DESTROY,
            selfSignUpEnabled: true,
            signInAliases: { email: true, phone: true },
            autoVerify: { email: true },
            passwordPolicy: {
                minLength: 6,
                requireLowercase: true,
                requireDigits: true,
                requireUppercase: true,
                requireSymbols: true,
            },
            standardAttributes: {
                givenName: {
                    required: true,
                    mutable: true,
                },
                familyName: {
                    required: true,
                    mutable: true,
                },
                email: {
                    required: true,
                    mutable: true,
                },
                address: {
                    required: true,
                    mutable: true,
                },
                birthdate: {
                    required: true,
                    mutable: true,
                },
                gender: {
                    required: true,
                    mutable: true,
                },
                locale: {
                    required: true,
                    mutable: true,
                },
                phoneNumber: {
                    required: true,
                    mutable: true,
                },
            },
            accountRecovery: cognito.AccountRecovery.EMAIL_ONLY,
        });
        const standardCognitoAttributes = {
            givenName: true,
            familyName: true,
            email: true,
            address: true,
            birthdate: true,
            gender: true,
            locale: true,
            phoneNumber: true,
        };
        const clientReadAttributes = new cognito.ClientAttributes().withStandardAttributes(standardCognitoAttributes);
        const clientWriteAttributes = new cognito.ClientAttributes().withStandardAttributes({
            ...standardCognitoAttributes,
            emailVerified: false,
            phoneNumberVerified: false,
        });
        const userPoolClient = new cognito.UserPoolClient(this, "userpool-client", {
            userPool,
            authFlows: {
                adminUserPassword: true,
                custom: true,
                userSrp: true,
                userPassword: true,
            },
            supportedIdentityProviders: [
                cognito.UserPoolClientIdentityProvider.COGNITO,
            ],
            readAttributes: clientReadAttributes,
            writeAttributes: clientWriteAttributes,
        });
        new cdk.CfnOutput(this, "region", { value: cdk.Stack.of(this).region });
        new cdk.CfnOutput(this, "userPoolId", { value: userPool.userPoolId });
        new cdk.CfnOutput(this, "userPoolClientId", {
            value: userPoolClient.userPoolClientId,
        });
        new cdk.CfnOutput(this, "apiUrl", { value: api.url });
        const auth = new apigateway.CognitoUserPoolsAuthorizer(this, "Authorizer", {
            cognitoUserPools: [userPool],
        });
        // POST APIS
        AllApiGateWays_1.WorksmanTermsAndConditionsApiGateway(api, WorksManTermsAndCondition, "POST", auth);
        AllApiGateWays_1.worksmanExperienceApiGateway(api, WorksManExperience, "POST", auth);
        // PostUserApiGateway(api, PostTestUser, 'POST', auth)
        AllApiGateWays_1.createPostcodesApiGateway(api, UserPostCodeLambdaApi, "POST", auth);
        AllApiGateWays_1.CreateWorksmanScheduleApiGateway(api, CreateWorksmanScheduleLambdaApi, "POST", auth);
        AllApiGateWays_1.CreateJobsApiGateway(api, WorksmanjobsCreateLambdaApi, "POST", auth);
        AllApiGateWays_1.CreateBankDetailsApiGateway(api, CreateBankDetailsLambdaApi, "POST", auth);
        AllApiGateWays_1.CreateMessagesApiGateway(api, CreateMessagesLambdaApi, "POST", auth);
        // CreateCustomerTableApiGateway(api, CreateCustomerTableLambdaApi, 'POST', auth)
        // CreateCustomerAddressApiGateway(api, CreateCustomerTableLambdaApi, 'POST', auth)
        // // CreatePaymentHistoryDetailsApiGateway(api, CreateCustomerTableLambdaApi, 'POST', auth)
        // // GET APIS
        AllApiGateWays_1.GetWorksmanAccountRegistartionStatusApiGateway(api, GetWorksmanAccountRegistartionStatus, "GET", auth);
        // GetTestUserApiGateway(api, GetTestUser, 'GET', auth)
        AllApiGateWays_1.getAllMobileNumbersApiGateway(api, getAllMobileNumbersDemo, "GET");
        AllApiGateWays_1.GetWorkmanDetailsApiGateway(api, GetWorkmanDetailLambda, "GET", auth);
        AllApiGateWays_1.GetAllPostcodesApiGateway(api, GetAllPostcodesLambdaApi, "GET", auth);
        AllApiGateWays_1.GetWorksmanScheduleApiGateway(api, GetWorksmanScheduleLambdaApi, "GET", auth);
        AllApiGateWays_1.GetWorksmanjobsApiGateway(api, GetWorksmanjobsLambdaApi, "GET", auth);
        AllApiGateWays_1.GetBankDetailsApiGateway(api, GetBankDetailsLambdaApi, "GET", auth);
        AllApiGateWays_1.GetMessagesApiGateway(api, GetMessagesLambdaApi, "GET", auth);
        AllApiGateWays_1.GetJobsApiGateway(api, GetJobsLambdaApi, "GET", auth);
        AllApiGateWays_1.GetListOfJobsBasedOnMonthApiGateway(api, GetListOfJobsBasedOnMonthLambdaApi, "GET", auth);
        AllApiGateWays_1.GetPaymentDetailsApiGateway(api, GetPaymentDetailsLambdaApi, "GET", auth);
        AllApiGateWays_1.GetPaymentHistoryDetailsApiGateway(api, GetPaymentHistoryDetailsLambdaApi, "GET", auth);
        AllApiGateWays_1.GetDistrictWisePostCodesApiGateway(api, GetDistrictWisePostCodesLambdaApi, "GET", auth);
        // // DELETE APIS
        AllApiGateWays_1.DeletePostcodesApiGateway(api, DeletePostcodesLambdaApi, "DELETE", auth);
        AllApiGateWays_1.DeleteWorkmanScheduleApiGateway(api, DeleteWorkmanScheduleLambdaApi, "DELETE", auth);
        // // UPDATE APIS
        AllApiGateWays_1.UpdateWorksmanDetailsApiGateway(api, UpdateWorksmanDetailLambda, "PUT", auth);
        AllApiGateWays_1.UpdateBankDetailsApiGateway(api, UpdateBankDetailsLambdaApi, "PUT", auth);
    }
}
exports.CdkExampleStack = CdkExampleStack;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2RrLWV4YW1wbGUtc3RhY2suanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjZGstZXhhbXBsZS1zdGFjay50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxxQ0FBcUM7QUFDckMsOENBQThDO0FBQzlDLDREQTJCc0M7QUFFdEMsc0RBQXNEO0FBQ3RELHdFQUEwRTtBQUMxRSwwRUEwQitDO0FBQy9DLGdEQUFnRDtBQUVoRCxNQUFhLGVBQWdCLFNBQVEsR0FBRyxDQUFDLEtBQUs7SUFFNUMsd0NBQXdDO0lBQ3hDLFlBQVksS0FBb0IsRUFBRSxFQUFVLEVBQUUsS0FBc0I7UUFDbEUsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFFeEIsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQzFDLElBQUksRUFDSixrQkFBa0IsRUFDbEIsa0NBQXNCLEVBQUUsQ0FDekIsQ0FBQztRQUNGLE1BQU0seUJBQXlCLEdBQUcsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUNuRCxJQUFJLEVBQ0osMkJBQTJCLEVBQzNCLDJDQUErQixFQUFFLENBQ2xDLENBQUM7UUFDRixNQUFNLGtCQUFrQixHQUFHLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FDNUMsSUFBSSxFQUNKLG9CQUFvQixFQUNwQixvQ0FBd0IsRUFBRSxDQUMzQixDQUFDO1FBQ0YsTUFBTSxvQ0FBb0MsR0FBRyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQzlELElBQUksRUFDSixzQ0FBc0MsRUFDdEMsc0RBQTBDLEVBQUUsQ0FDN0MsQ0FBQztRQUNGLE1BQU0sdUJBQXVCLEdBQUcsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUNqRCxJQUFJLEVBQ0osb0JBQW9CLEVBQ3BCLG9DQUF3QixFQUFFLENBQzNCLENBQUM7UUFDRixNQUFNLHNCQUFzQixHQUFHLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FDaEQsSUFBSSxFQUNKLG1CQUFtQixFQUNuQixtQ0FBdUIs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R0FBRyxFQUNILGtDQUFrQyxFQUNsQyxLQUFLLEVBQ0wsSUFBSSxDQUNMLENBQUM7UUFDRiw0Q0FBMkIsQ0FBQyxHQUFHLEVBQUUsMEJBQTBCLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQzFFLG1EQUFrQyxDQUNoQyxHQUFHLEVBQ0gsaUNBQWlDLEVBQ2pDLEtBQUssRUFDTCxJQUFJLENBQ0wsQ0FBQztRQUNGLG1EQUFrQyxDQUNoQyxHQUFHLEVBQ0gsaUNBQWlDLEVBQ2pDLEtBQUssRUFDTCxJQUFJLENBQ0wsQ0FBQztRQUVGLGlCQUFpQjtRQUNqQiwwQ0FBeUIsQ0FBQyxHQUFHLEVBQUUsd0JBQXdCLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3pFLGdEQUErQixDQUM3QixHQUFHLEVBQ0gsOEJBQThCLEVBQzlCLFFBQVEsRUFDUixJQUFJLENBQ0wsQ0FBQztRQUVGLGlCQUFpQjtRQUNqQixnREFBK0IsQ0FDN0IsR0FBRyxFQUNILDBCQUEwQixFQUMxQixLQUFLLEVBQ0wsSUFBSSxDQUNMLENBQUM7UUFDRiw0Q0FBMkIsQ0FBQyxHQUFHLEVBQUUsMEJBQTBCLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzVFLENBQUM7Q0FDRjtBQXZVRCwwQ0F1VUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBjZGsgZnJvbSBcIkBhd3MtY2RrL2NvcmVcIjtcclxuaW1wb3J0ICogYXMgbGFtYmRhIGZyb20gXCJAYXdzLWNkay9hd3MtbGFtYmRhXCI7XHJcbmltcG9ydCB7XHJcbiAgVXNlclJlZ2lzdHJhdGlvbkxhbWJkYSxcclxuICBXb3Jrc01hblRlcm1zQW5kQ29uZGl0aW9uTGFtYmRhLFxyXG4gIFdvcmtzTWFuRXhwZXJpZW5jZUxhbWJkYSxcclxuICBHZXRXb3Jrc21hbkFjY291bnRSZWdpc3RhcnRpb25TdGF0dXNMYW1iZGEsXHJcbiAgZ2V0QWxsTW9iaWxlTnVtYmVyTGFtYmRhLFxyXG4gIEdldFdvcmttYW5EZXRhaWxzTGFtYmRhLFxyXG4gIFVwZGF0ZVdvcmtzbWFuRGV0YWlsc0xhbWJkYSxcclxuICBVc2VyUG9zdENvZGVzTGFtYmRhLFxyXG4gIEdldEFsbFBvc3Rjb2Rlc0xhbWJkYSxcclxuICBEZWxldGVQb3N0Y29kZXNMYW1iZGEsXHJcbiAgQ3JlYXRlV29ya3NtYW5TY2hlZHVsZUxhbWJkYSxcclxuICBEZWxldGVXb3JrbWFuU2NoZWR1bGVMYW1iZGEsXHJcbiAgR2V0V29ya3NtYW5TY2hlZHVsZXNMYW1iZGEsXHJcbiAgR2V0V29ya3NtYW5qb2JzTGFtYmRhLFxyXG4gIFdvcmtzbWFuam9ic0NyZWF0ZUxhbWJkYSxcclxuICBHZXRNZXNzYWdlc0xhbWJkYSxcclxuICBDcmVhdGVNZXNzYWdlc0xhbWJkYSxcclxuICBDcmVhdGVCYW5rRGV0YWlsc0xhbWJkYSxcclxuICBHZXRCYW5rRGV0YWlsc0xhbWJkYSxcclxuICBHZXRKb2JzTGFtYmRhLFxyXG4gIEdldFBheW1lbnREZXRhaWxzTGFtYmRhLFxyXG4gIENyZWF0ZVBheW1lbnRIaXN0b3J5RGV0YWlsc0xhbWJkYSxcclxuICBHZXRQYXltZW50SGlzdG9yeURldGFpbHNMYW1iZGEsXHJcbiAgR2V0RGlzdHJpY3RXaXNlUG9zdENvZGVzTGFtYmRhLFxyXG4gIFVwZGF0ZUJhbmtEZXRhaWxzTGFtYmRhLFxyXG4gIEdldExpc3RPZkpvYnNCYXNlZE9uTW9udGhMYW1iZGEsXHJcbn0gZnJvbSBcIi4vcmVzb3VyY2VzL2xhbWJkYS9hbGxsYW1iZGFcIjtcclxuaW1wb3J0ICogYXMgc2ZuIGZyb20gXCJAYXdzLWNkay9hd3Mtc3RlcGZ1bmN0aW9uc1wiO1xyXG5pbXBvcnQgKiBhcyBhcGlnYXRld2F5IGZyb20gXCJAYXdzLWNkay9hd3MtYXBpZ2F0ZXdheVwiO1xyXG5pbXBvcnQgeyBBcGlnYXRld2F5RGF0YUNvbnN0YW50cyB9IGZyb20gXCIuLi9jb25zdGFudHMvQXBpR2F0ZXdheUNvbnN0YW50XCI7XHJcbmltcG9ydCB7XHJcbiAgV29ya3NtYW5UZXJtc0FuZENvbmRpdGlvbnNBcGlHYXRld2F5LFxyXG4gIGdldEFsbE1vYmlsZU51bWJlcnNBcGlHYXRld2F5LFxyXG4gIHdvcmtzbWFuRXhwZXJpZW5jZUFwaUdhdGV3YXksXHJcbiAgR2V0V29ya3NtYW5BY2NvdW50UmVnaXN0YXJ0aW9uU3RhdHVzQXBpR2F0ZXdheSxcclxuICBHZXRXb3JrbWFuRGV0YWlsc0FwaUdhdGV3YXksXHJcbiAgVXBkYXRlV29ya3NtYW5EZXRhaWxzQXBpR2F0ZXdheSxcclxuICBjcmVhdGVQb3N0Y29kZXNBcGlHYXRld2F5LFxyXG4gIEdldEFsbFBvc3Rjb2Rlc0FwaUdhdGV3YXksXHJcbiAgRGVsZXRlUG9zdGNvZGVzQXBpR2F0ZXdheSxcclxuICBDcmVhdGVXb3Jrc21hblNjaGVkdWxlQXBpR2F0ZXdheSxcclxuICBEZWxldGVXb3JrbWFuU2NoZWR1bGVBcGlHYXRld2F5LFxyXG4gIEdldFdvcmtzbWFuU2NoZWR1bGVBcGlHYXRld2F5LFxyXG4gIEdldFdvcmtzbWFuam9ic0FwaUdhdGV3YXksXHJcbiAgQ3JlYXRlSm9ic0FwaUdhdGV3YXksXHJcbiAgR2V0TWVzc2FnZXNBcGlHYXRld2F5LFxyXG4gIENyZWF0ZU1lc3NhZ2VzQXBpR2F0ZXdheSxcclxuICBDcmVhdGVCYW5rRGV0YWlsc0FwaUdhdGV3YXksXHJcbiAgR2V0QmFua0RldGFpbHNBcGlHYXRld2F5LFxyXG4gIEdldEpvYnNBcGlHYXRld2F5LFxyXG4gIEdldFBheW1lbnREZXRhaWxzQXBpR2F0ZXdheSxcclxuICBDcmVhdGVQYXltZW50SGlzdG9yeURldGFpbHNBcGlHYXRld2F5LFxyXG4gIEdldFBheW1lbnRIaXN0b3J5RGV0YWlsc0FwaUdhdGV3YXksXHJcbiAgR2V0RGlzdHJpY3RXaXNlUG9zdENvZGVzQXBpR2F0ZXdheSxcclxuICBVcGRhdGVCYW5rRGV0YWlsc0FwaUdhdGV3YXksXHJcbiAgR2V0TGlzdE9mSm9ic0Jhc2VkT25Nb250aEFwaUdhdGV3YXksXHJcbn0gZnJvbSBcIi4vcmVzb3VyY2VzL0FwaUdhdGV3YXkvQWxsQXBpR2F0ZVdheXNcIjtcclxuaW1wb3J0ICogYXMgY29nbml0byBmcm9tIFwiQGF3cy1jZGsvYXdzLWNvZ25pdG9cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDZGtFeGFtcGxlU3RhY2sgZXh0ZW5kcyBjZGsuU3RhY2sge1xyXG4gIHB1YmxpYyBNYWNoaW5lOiBzZm4uU3RhdGVNYWNoaW5lO1xyXG4gIC8vIHB1YmxpYyByZWFkb25seSB1cmxPdXRwdXQ6IENmbk91dHB1dDtcclxuICBjb25zdHJ1Y3RvcihzY29wZTogY2RrLkNvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM/OiBjZGsuU3RhY2tQcm9wcykge1xyXG4gICAgc3VwZXIoc2NvcGUsIGlkLCBwcm9wcyk7XHJcblxyXG4gICAgY29uc3QgdXNlclJlZ2lzdHJhdGlvbiA9IG5ldyBsYW1iZGEuRnVuY3Rpb24oXHJcbiAgICAgIHRoaXMsXHJcbiAgICAgIFwiVXNlclJlZ2lzdHJhdGlvblwiLFxyXG4gICAgICBVc2VyUmVnaXN0cmF0aW9uTGFtYmRhKClcclxuICAgICk7XHJcbiAgICBjb25zdCBXb3Jrc01hblRlcm1zQW5kQ29uZGl0aW9uID0gbmV3IGxhbWJkYS5GdW5jdGlvbihcclxuICAgICAgdGhpcyxcclxuICAgICAgXCJXb3Jrc01hblRlcm1zQW5kQ29uZGl0aW9uXCIsXHJcbiAgICAgIFdvcmtzTWFuVGVybXNBbmRDb25kaXRpb25MYW1iZGEoKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IFdvcmtzTWFuRXhwZXJpZW5jZSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24oXHJcbiAgICAgIHRoaXMsXHJcbiAgICAgIFwiV29ya3NNYW5FeHBlcmllbmNlXCIsXHJcbiAgICAgIFdvcmtzTWFuRXhwZXJpZW5jZUxhbWJkYSgpXHJcbiAgICApO1xyXG4gICAgY29uc3QgR2V0V29ya3NtYW5BY2NvdW50UmVnaXN0YXJ0aW9uU3RhdHVzID0gbmV3IGxhbWJkYS5GdW5jdGlvbihcclxuICAgICAgdGhpcyxcclxuICAgICAgXCJHZXRXb3Jrc21hbkFjY291bnRSZWdpc3RhcnRpb25TdGF0dXNcIixcclxuICAgICAgR2V0V29ya3NtYW5BY2NvdW50UmVnaXN0YXJ0aW9uU3RhdHVzTGFtYmRhKClcclxuICAgICk7XHJcbiAgICBjb25zdCBnZXRBbGxNb2JpbGVOdW1iZXJzRGVtbyA9IG5ldyBsYW1iZGEuRnVuY3Rpb24oXHJcbiAgICAgIHRoaXMsXHJcbiAgICAgIFwiZ2V0QWxsTW9iaWxlTnVtYmVyXCIsXHJcbiAgICAgIGdldEFsbE1vYmlsZU51bWJlckxhbWJkYSgpXHJcbiAgICApO1xyXG4gICAgY29uc3QgR2V0V29ya21hbkRldGFpbExhbWJkYSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24oXHJcbiAgICAgIHRoaXMsXHJcbiAgICAgIFwiR2V0V29ya21hbkRldGFpbHNcIixcclxuICAgICAgR2V0V29ya21hbkRldGFpbHNMYW1iZGEoKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IFVwZGF0ZVdvcmtzbWFuRGV0YWlsTGFtYmRhID0gbmV3IGxhbWJkYS5GdW5jdGlvbihcclxuICAgICAgdGhpcyxcclxuICAgICAgXCJVcGRhdGVXb3Jrc21hbkRldGFpbFwiLFxyXG4gICAgICBVcGRhdGVXb3Jrc21hbkRldGFpbHNMYW1iZGEoKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IFVzZXJQb3N0Q29kZUxhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24oXHJcbiAgICAgIHRoaXMsXHJcbiAgICAgIFwiVXNlclBvc3RDb2Rlc1wiLFxyXG4gICAgICBVc2VyUG9zdENvZGVzTGFtYmRhKClcclxuICAgICk7XHJcbiAgICBjb25zdCBHZXRBbGxQb3N0Y29kZXNMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKFxyXG4gICAgICB0aGlzLFxyXG4gICAgICBcIkdldEFsbFBvc3Rjb2Rlc1wiLFxyXG4gICAgICBHZXRBbGxQb3N0Y29kZXNMYW1iZGEoKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IERlbGV0ZVBvc3Rjb2Rlc0xhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24oXHJcbiAgICAgIHRoaXMsXHJcbiAgICAgIFwiRGVsZXRlUG9zdGNvZGVzXCIsXHJcbiAgICAgIERlbGV0ZVBvc3Rjb2Rlc0xhbWJkYSgpXHJcbiAgICApO1xyXG4gICAgY29uc3QgQ3JlYXRlV29ya3NtYW5TY2hlZHVsZUxhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24oXHJcbiAgICAgIHRoaXMsXHJcbiAgICAgIFwiQ3JlYXRlV29ya3NtYW5TY2hlZHVsZVwiLFxyXG4gICAgICBDcmVhdGVXb3Jrc21hblNjaGVkdWxlTGFtYmRhKClcclxuICAgICk7XHJcbiAgICBjb25zdCBEZWxldGVXb3JrbWFuU2NoZWR1bGVMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKFxyXG4gICAgICB0aGlzLFxyXG4gICAgICBcIkRlbGV0ZVdvcmttYW5TY2hlZHVsZVwiLFxyXG4gICAgICBEZWxldGVXb3JrbWFuU2NoZWR1bGVMYW1iZGEoKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IEdldFdvcmtzbWFuU2NoZWR1bGVMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKFxyXG4gICAgICB0aGlzLFxyXG4gICAgICBcIkdldFdvcmtzbWFuU2NoZWR1bGVcIixcclxuICAgICAgR2V0V29ya3NtYW5TY2hlZHVsZXNMYW1iZGEoKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IEdldFdvcmtzbWFuam9ic0xhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24oXHJcbiAgICAgIHRoaXMsXHJcbiAgICAgIFwiR2V0V29ya3NtYW5qb2JzXCIsXHJcbiAgICAgIEdldFdvcmtzbWFuam9ic0xhbWJkYSgpXHJcbiAgICApO1xyXG4gICAgY29uc3QgV29ya3NtYW5qb2JzQ3JlYXRlTGFtYmRhQXBpID0gbmV3IGxhbWJkYS5GdW5jdGlvbihcclxuICAgICAgdGhpcyxcclxuICAgICAgXCJXb3Jrc21hbmpvYnNDcmVhdGVcIixcclxuICAgICAgV29ya3NtYW5qb2JzQ3JlYXRlTGFtYmRhKClcclxuICAgICk7XHJcbiAgICBjb25zdCBDcmVhdGVCYW5rRGV0YWlsc0xhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24oXHJcbiAgICAgIHRoaXMsXHJcbiAgICAgIFwiQ3JlYXRlQmFua0RldGFpbHNcIixcclxuICAgICAgQ3JlYXRlQmFua0RldGFpbHNMYW1iZGEoKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IEdldEJhbmtEZXRhaWxzTGFtYmRhQXBpID0gbmV3IGxhbWJkYS5GdW5jdGlvbihcclxuICAgICAgdGhpcyxcclxuICAgICAgXCJHZXRCYW5rRGV0YWlsc1wiLFxyXG4gICAgICBHZXRCYW5rRGV0YWlsc0xhbWJkYSgpXHJcbiAgICApO1xyXG4gICAgY29uc3QgQ3JlYXRlTWVzc2FnZXNMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKFxyXG4gICAgICB0aGlzLFxyXG4gICAgICBcIkNyZWF0ZU1lc3NhZ2VzXCIsXHJcbiAgICAgIENyZWF0ZU1lc3NhZ2VzTGFtYmRhKClcclxuICAgICk7XHJcbiAgICBjb25zdCBHZXRNZXNzYWdlc0xhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24oXHJcbiAgICAgIHRoaXMsXHJcbiAgICAgIFwiR2V0TWVzc2FnZXNcIixcclxuICAgICAgR2V0TWVzc2FnZXNMYW1iZGEoKVxyXG4gICAgKTtcclxuICAgIC8vIGNvbnN0IENyZWF0ZUN1c3RvbWVyVGFibGVMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsIFwiQ3JlYXRlQ3VzdG9tZXJUYWJsZVwiLCBDcmVhdGVDdXN0b21lclRhYmxlTGFtYmRhKCkpXHJcbiAgICAvLyBjb25zdCBDcmVhdGVDdXN0b21lckFkZHJlc3NMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsIFwiQ3JlYXRlQ3VzdG9tZXJBZGRyZXNzXCIsIENyZWF0ZUN1c3RvbWVyQWRkcmVzc0xhbWJkYSgpKVxyXG4gICAgY29uc3QgR2V0Sm9ic0xhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24oXHJcbiAgICAgIHRoaXMsXHJcbiAgICAgIFwiR2V0Sm9ic1wiLFxyXG4gICAgICBHZXRKb2JzTGFtYmRhKClcclxuICAgICk7XHJcbiAgICBjb25zdCBHZXRMaXN0T2ZKb2JzQmFzZWRPbk1vbnRoTGFtYmRhQXBpID0gbmV3IGxhbWJkYS5GdW5jdGlvbihcclxuICAgICAgdGhpcyxcclxuICAgICAgXCJHZXRMaXN0T2ZKb2JzQmFzZWRPbk1vbnRoXCIsXHJcbiAgICAgIEdldExpc3RPZkpvYnNCYXNlZE9uTW9udGhMYW1iZGEoKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IEdldFBheW1lbnREZXRhaWxzTGFtYmRhQXBpID0gbmV3IGxhbWJkYS5GdW5jdGlvbihcclxuICAgICAgdGhpcyxcclxuICAgICAgXCJHZXRQYXltZW50RGV0YWlsc1wiLFxyXG4gICAgICBHZXRQYXltZW50RGV0YWlsc0xhbWJkYSgpXHJcbiAgICApO1xyXG4gICAgY29uc3QgQ3JlYXRlUGF5bWVudEhpc3RvcnlEZXRhaWxzTGFtYmRhQXBpID0gbmV3IGxhbWJkYS5GdW5jdGlvbihcclxuICAgICAgdGhpcyxcclxuICAgICAgXCJDcmVhdGVQYXltZW50SGlzdG9yeURldGFpbHNcIixcclxuICAgICAgQ3JlYXRlUGF5bWVudEhpc3RvcnlEZXRhaWxzTGFtYmRhKClcclxuICAgICk7XHJcbiAgICBjb25zdCBHZXRQYXltZW50SGlzdG9yeURldGFpbHNMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKFxyXG4gICAgICB0aGlzLFxyXG4gICAgICBcIkdldFBheW1lbnRIaXN0b3J5RGV0YWlsc1wiLFxyXG4gICAgICBHZXRQYXltZW50SGlzdG9yeURldGFpbHNMYW1iZGEoKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IEdldERpc3RyaWN0V2lzZVBvc3RDb2Rlc0xhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24oXHJcbiAgICAgIHRoaXMsXHJcbiAgICAgIFwiR2V0RGlzdHJpY3RXaXNlUG9zdENvZGVzXCIsXHJcbiAgICAgIEdldERpc3RyaWN0V2lzZVBvc3RDb2Rlc0xhbWJkYSgpXHJcbiAgICApO1xyXG4gICAgY29uc3QgVXBkYXRlQmFua0RldGFpbHNMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKFxyXG4gICAgICB0aGlzLFxyXG4gICAgICBcIlVwZGF0ZUJhbmtEZXRhaWxzXCIsXHJcbiAgICAgIFVwZGF0ZUJhbmtEZXRhaWxzTGFtYmRhKClcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgYXBpID0gbmV3IGFwaWdhdGV3YXkuUmVzdEFwaShcclxuICAgICAgdGhpcyxcclxuICAgICAgXCJXb3Jrc21hbkFwaURhdGFcIixcclxuICAgICAgQXBpZ2F0ZXdheURhdGFDb25zdGFudHMoYXBpZ2F0ZXdheSlcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgdXNlclBvb2wgPSBuZXcgY29nbml0by5Vc2VyUG9vbCh0aGlzLCBcInVzZXJwb29sXCIsIHtcclxuICAgICAgdXNlclBvb2xOYW1lOiBgdmstY2xlYW4tcG9ydGFsYCxcclxuICAgICAgcmVtb3ZhbFBvbGljeTogY2RrLlJlbW92YWxQb2xpY3kuREVTVFJPWSxcclxuICAgICAgc2VsZlNpZ25VcEVuYWJsZWQ6IHRydWUsXHJcbiAgICAgIHNpZ25JbkFsaWFzZXM6IHsgZW1haWw6IHRydWUsIHBob25lOiB0cnVlIH0sXHJcbiAgICAgIGF1dG9WZXJpZnk6IHsgZW1haWw6IHRydWUgfSxcclxuICAgICAgcGFzc3dvcmRQb2xpY3k6IHtcclxuICAgICAgICBtaW5MZW5ndGg6IDYsXHJcbiAgICAgICAgcmVxdWlyZUxvd2VyY2FzZTogdHJ1ZSxcclxuICAgICAgICByZXF1aXJlRGlnaXRzOiB0cnVlLFxyXG4gICAgICAgIHJlcXVpcmVVcHBlcmNhc2U6IHRydWUsXHJcbiAgICAgICAgcmVxdWlyZVN5bWJvbHM6IHRydWUsXHJcbiAgICAgIH0sXHJcbiAgICAgIHN0YW5kYXJkQXR0cmlidXRlczoge1xyXG4gICAgICAgIGdpdmVuTmFtZToge1xyXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICBtdXRhYmxlOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZmFtaWx5TmFtZToge1xyXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICBtdXRhYmxlOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW1haWw6IHtcclxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgbXV0YWJsZTogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFkZHJlc3M6IHtcclxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgbXV0YWJsZTogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJpcnRoZGF0ZToge1xyXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICBtdXRhYmxlOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2VuZGVyOiB7XHJcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgIG11dGFibGU6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsb2NhbGU6IHtcclxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgbXV0YWJsZTogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBob25lTnVtYmVyOiB7XHJcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgIG11dGFibGU6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgYWNjb3VudFJlY292ZXJ5OiBjb2duaXRvLkFjY291bnRSZWNvdmVyeS5FTUFJTF9PTkxZLFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3Qgc3RhbmRhcmRDb2duaXRvQXR0cmlidXRlcyA9IHtcclxuICAgICAgZ2l2ZW5OYW1lOiB0cnVlLFxyXG4gICAgICBmYW1pbHlOYW1lOiB0cnVlLFxyXG4gICAgICBlbWFpbDogdHJ1ZSxcclxuICAgICAgYWRkcmVzczogdHJ1ZSxcclxuICAgICAgYmlydGhkYXRlOiB0cnVlLFxyXG4gICAgICBnZW5kZXI6IHRydWUsXHJcbiAgICAgIGxvY2FsZTogdHJ1ZSxcclxuICAgICAgcGhvbmVOdW1iZXI6IHRydWUsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGNsaWVudFJlYWRBdHRyaWJ1dGVzID1cclxuICAgICAgbmV3IGNvZ25pdG8uQ2xpZW50QXR0cmlidXRlcygpLndpdGhTdGFuZGFyZEF0dHJpYnV0ZXMoXHJcbiAgICAgICAgc3RhbmRhcmRDb2duaXRvQXR0cmlidXRlc1xyXG4gICAgICApO1xyXG5cclxuICAgIGNvbnN0IGNsaWVudFdyaXRlQXR0cmlidXRlcyA9XHJcbiAgICAgIG5ldyBjb2duaXRvLkNsaWVudEF0dHJpYnV0ZXMoKS53aXRoU3RhbmRhcmRBdHRyaWJ1dGVzKHtcclxuICAgICAgICAuLi5zdGFuZGFyZENvZ25pdG9BdHRyaWJ1dGVzLFxyXG4gICAgICAgIGVtYWlsVmVyaWZpZWQ6IGZhbHNlLFxyXG4gICAgICAgIHBob25lTnVtYmVyVmVyaWZpZWQ6IGZhbHNlLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICBjb25zdCB1c2VyUG9vbENsaWVudCA9IG5ldyBjb2duaXRvLlVzZXJQb29sQ2xpZW50KHRoaXMsIFwidXNlcnBvb2wtY2xpZW50XCIsIHtcclxuICAgICAgdXNlclBvb2wsXHJcbiAgICAgIGF1dGhGbG93czoge1xyXG4gICAgICAgIGFkbWluVXNlclBhc3N3b3JkOiB0cnVlLFxyXG4gICAgICAgIGN1c3RvbTogdHJ1ZSxcclxuICAgICAgICB1c2VyU3JwOiB0cnVlLFxyXG4gICAgICAgIHVzZXJQYXNzd29yZDogdHJ1ZSxcclxuICAgICAgfSxcclxuICAgICAgc3VwcG9ydGVkSWRlbnRpdHlQcm92aWRlcnM6IFtcclxuICAgICAgICBjb2duaXRvLlVzZXJQb29sQ2xpZW50SWRlbnRpdHlQcm92aWRlci5DT0dOSVRPLFxyXG4gICAgICBdLFxyXG4gICAgICByZWFkQXR0cmlidXRlczogY2xpZW50UmVhZEF0dHJpYnV0ZXMsXHJcbiAgICAgIHdyaXRlQXR0cmlidXRlczogY2xpZW50V3JpdGVBdHRyaWJ1dGVzLFxyXG4gICAgfSk7XHJcblxyXG4gICAgbmV3IGNkay5DZm5PdXRwdXQodGhpcywgXCJyZWdpb25cIiwgeyB2YWx1ZTogY2RrLlN0YWNrLm9mKHRoaXMpLnJlZ2lvbiB9KTtcclxuICAgIG5ldyBjZGsuQ2ZuT3V0cHV0KHRoaXMsIFwidXNlclBvb2xJZFwiLCB7IHZhbHVlOiB1c2VyUG9vbC51c2VyUG9vbElkIH0pO1xyXG4gICAgbmV3IGNkay5DZm5PdXRwdXQodGhpcywgXCJ1c2VyUG9vbENsaWVudElkXCIsIHtcclxuICAgICAgdmFsdWU6IHVzZXJQb29sQ2xpZW50LnVzZXJQb29sQ2xpZW50SWQsXHJcbiAgICB9KTtcclxuXHJcbiAgICBuZXcgY2RrLkNmbk91dHB1dCh0aGlzLCBcImFwaVVybFwiLCB7IHZhbHVlOiBhcGkudXJsIH0pO1xyXG5cclxuICAgIGNvbnN0IGF1dGggPSBuZXcgYXBpZ2F0ZXdheS5Db2duaXRvVXNlclBvb2xzQXV0aG9yaXplcih0aGlzLCBcIkF1dGhvcml6ZXJcIiwge1xyXG4gICAgICBjb2duaXRvVXNlclBvb2xzOiBbdXNlclBvb2xdLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gUE9TVCBBUElTXHJcbiAgICBXb3Jrc21hblRlcm1zQW5kQ29uZGl0aW9uc0FwaUdhdGV3YXkoXHJcbiAgICAgIGFwaSxcclxuICAgICAgV29ya3NNYW5UZXJtc0FuZENvbmRpdGlvbixcclxuICAgICAgXCJQT1NUXCIsXHJcbiAgICAgIGF1dGhcclxuICAgICk7XHJcbiAgICB3b3Jrc21hbkV4cGVyaWVuY2VBcGlHYXRld2F5KGFwaSwgV29ya3NNYW5FeHBlcmllbmNlLCBcIlBPU1RcIiwgYXV0aCk7XHJcbiAgICAvLyBQb3N0VXNlckFwaUdhdGV3YXkoYXBpLCBQb3N0VGVzdFVzZXIsICdQT1NUJywgYXV0aClcclxuICAgIGNyZWF0ZVBvc3Rjb2Rlc0FwaUdhdGV3YXkoYXBpLCBVc2VyUG9zdENvZGVMYW1iZGFBcGksIFwiUE9TVFwiLCBhdXRoKTtcclxuICAgIENyZWF0ZVdvcmtzbWFuU2NoZWR1bGVBcGlHYXRld2F5KFxyXG4gICAgICBhcGksXHJcbiAgICAgIENyZWF0ZVdvcmtzbWFuU2NoZWR1bGVMYW1iZGFBcGksXHJcbiAgICAgIFwiUE9TVFwiLFxyXG4gICAgICBhdXRoXHJcbiAgICApO1xyXG4gICAgQ3JlYXRlSm9ic0FwaUdhdGV3YXkoYXBpLCBXb3Jrc21hbmpvYnNDcmVhdGVMYW1iZGFBcGksIFwiUE9TVFwiLCBhdXRoKTtcclxuICAgIENyZWF0ZUJhbmtEZXRhaWxzQXBpR2F0ZXdheShhcGksIENyZWF0ZUJhbmtEZXRhaWxzTGFtYmRhQXBpLCBcIlBPU1RcIiwgYXV0aCk7XHJcbiAgICBDcmVhdGVNZXNzYWdlc0FwaUdhdGV3YXkoYXBpLCBDcmVhdGVNZXNzYWdlc0xhbWJkYUFwaSwgXCJQT1NUXCIsIGF1dGgpO1xyXG4gICAgLy8gQ3JlYXRlQ3VzdG9tZXJUYWJsZUFwaUdhdGV3YXkoYXBpLCBDcmVhdGVDdXN0b21lclRhYmxlTGFtYmRhQXBpLCAnUE9TVCcsIGF1dGgpXHJcbiAgICAvLyBDcmVhdGVDdXN0b21lckFkZHJlc3NBcGlHYXRld2F5KGFwaSwgQ3JlYXRlQ3VzdG9tZXJUYWJsZUxhbWJkYUFwaSwgJ1BPU1QnLCBhdXRoKVxyXG4gICAgLy8gLy8gQ3JlYXRlUGF5bWVudEhpc3RvcnlEZXRhaWxzQXBpR2F0ZXdheShhcGksIENyZWF0ZUN1c3RvbWVyVGFibGVMYW1iZGFBcGksICdQT1NUJywgYXV0aClcclxuXHJcbiAgICAvLyAvLyBHRVQgQVBJU1xyXG4gICAgR2V0V29ya3NtYW5BY2NvdW50UmVnaXN0YXJ0aW9uU3RhdHVzQXBpR2F0ZXdheShcclxuICAgICAgYXBpLFxyXG4gICAgICBHZXRXb3Jrc21hbkFjY291bnRSZWdpc3RhcnRpb25TdGF0dXMsXHJcbiAgICAgIFwiR0VUXCIsXHJcbiAgICAgIGF1dGhcclxuICAgICk7XHJcbiAgICAvLyBHZXRUZXN0VXNlckFwaUdhdGV3YXkoYXBpLCBHZXRUZXN0VXNlciwgJ0dFVCcsIGF1dGgpXHJcbiAgICBnZXRBbGxNb2JpbGVOdW1iZXJzQXBpR2F0ZXdheShhcGksIGdldEFsbE1vYmlsZU51bWJlcnNEZW1vLCBcIkdFVFwiKTtcclxuICAgIEdldFdvcmttYW5EZXRhaWxzQXBpR2F0ZXdheShhcGksIEdldFdvcmttYW5EZXRhaWxMYW1iZGEsIFwiR0VUXCIsIGF1dGgpO1xyXG4gICAgR2V0QWxsUG9zdGNvZGVzQXBpR2F0ZXdheShhcGksIEdldEFsbFBvc3Rjb2Rlc0xhbWJkYUFwaSwgXCJHRVRcIiwgYXV0aCk7XHJcbiAgICBHZXRXb3Jrc21hblNjaGVkdWxlQXBpR2F0ZXdheShcclxuICAgICAgYXBpLFxyXG4gICAgICBHZXRXb3Jrc21hblNjaGVkdWxlTGFtYmRhQXBpLFxyXG4gICAgICBcIkdFVFwiLFxyXG4gICAgICBhdXRoXHJcbiAgICApO1xyXG4gICAgR2V0V29ya3NtYW5qb2JzQXBpR2F0ZXdheShhcGksIEdldFdvcmtzbWFuam9ic0xhbWJkYUFwaSwgXCJHRVRcIiwgYXV0aCk7XHJcbiAgICBHZXRCYW5rRGV0YWlsc0FwaUdhdGV3YXkoYXBpLCBHZXRCYW5rRGV0YWlsc0xhbWJkYUFwaSwgXCJHRVRcIiwgYXV0aCk7XHJcbiAgICBHZXRNZXNzYWdlc0FwaUdhdGV3YXkoYXBpLCBHZXRNZXNzYWdlc0xhbWJkYUFwaSwgXCJHRVRcIiwgYXV0aCk7XHJcbiAgICBHZXRKb2JzQXBpR2F0ZXdheShhcGksIEdldEpvYnNMYW1iZGFBcGksIFwiR0VUXCIsIGF1dGgpO1xyXG4gICAgR2V0TGlzdE9mSm9ic0Jhc2VkT25Nb250aEFwaUdhdGV3YXkoXHJcbiAgICAgIGFwaSxcclxuICAgICAgR2V0TGlzdE9mSm9ic0Jhc2VkT25Nb250aExhbWJkYUFwaSxcclxuICAgICAgXCJHRVRcIixcclxuICAgICAgYXV0aFxyXG4gICAgKTtcclxuICAgIEdldFBheW1lbnREZXRhaWxzQXBpR2F0ZXdheShhcGksIEdldFBheW1lbnREZXRhaWxzTGFtYmRhQXBpLCBcIkdFVFwiLCBhdXRoKTtcclxuICAgIEdldFBheW1lbnRIaXN0b3J5RGV0YWlsc0FwaUdhdGV3YXkoXHJcbiAgICAgIGFwaSxcclxuICAgICAgR2V0UGF5bWVudEhpc3RvcnlEZXRhaWxzTGFtYmRhQXBpLFxyXG4gICAgICBcIkdFVFwiLFxyXG4gICAgICBhdXRoXHJcbiAgICApO1xyXG4gICAgR2V0RGlzdHJpY3RXaXNlUG9zdENvZGVzQXBpR2F0ZXdheShcclxuICAgICAgYXBpLFxyXG4gICAgICBHZXREaXN0cmljdFdpc2VQb3N0Q29kZXNMYW1iZGFBcGksXHJcbiAgICAgIFwiR0VUXCIsXHJcbiAgICAgIGF1dGhcclxuICAgICk7XHJcblxyXG4gICAgLy8gLy8gREVMRVRFIEFQSVNcclxuICAgIERlbGV0ZVBvc3Rjb2Rlc0FwaUdhdGV3YXkoYXBpLCBEZWxldGVQb3N0Y29kZXNMYW1iZGFBcGksIFwiREVMRVRFXCIsIGF1dGgpO1xyXG4gICAgRGVsZXRlV29ya21hblNjaGVkdWxlQXBpR2F0ZXdheShcclxuICAgICAgYXBpLFxyXG4gICAgICBEZWxldGVXb3JrbWFuU2NoZWR1bGVMYW1iZGFBcGksXHJcbiAgICAgIFwiREVMRVRFXCIsXHJcbiAgICAgIGF1dGhcclxuICAgICk7XHJcblxyXG4gICAgLy8gLy8gVVBEQVRFIEFQSVNcclxuICAgIFVwZGF0ZVdvcmtzbWFuRGV0YWlsc0FwaUdhdGV3YXkoXHJcbiAgICAgIGFwaSxcclxuICAgICAgVXBkYXRlV29ya3NtYW5EZXRhaWxMYW1iZGEsXHJcbiAgICAgIFwiUFVUXCIsXHJcbiAgICAgIGF1dGhcclxuICAgICk7XHJcbiAgICBVcGRhdGVCYW5rRGV0YWlsc0FwaUdhdGV3YXkoYXBpLCBVcGRhdGVCYW5rRGV0YWlsc0xhbWJkYUFwaSwgXCJQVVRcIiwgYXV0aCk7XHJcbiAgfVxyXG59XHJcbiJdfQ==