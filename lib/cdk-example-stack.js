"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CdkExampleStack = void 0;
const cdk = require("@aws-cdk/core");
const lambda = require("@aws-cdk/aws-lambda");
const allLambda_1 = require("./resources/lambda/allLambda");
const apigateway = require("@aws-cdk/aws-apigateway");
const ApiGatewayConstant_1 = require("../constants/ApiGatewayConstant");
const AllApiGateWays_1 = require("./resources/ApiGateway/AllApiGateWays");
const cognito = require("@aws-cdk/aws-cognito");
class CdkExampleStack extends cdk.Stack {
    constructor(scope, id, props) {
        super(scope, id, props);
        const userRegistration = new lambda.Function(this, 'UserRegistration', allLambda_1.UserRegistrationLambda());
        const WorksManTermsAndCondition = new lambda.Function(this, 'WorksManTermsAndCondition', allLambda_1.WorksManTermsAndConditionLambda());
        const WorksManExperience = new lambda.Function(this, 'WorksManExperience', allLambda_1.WorksManExperienceLambda());
        const GetWorksmanAccountRegistartionStatus = new lambda.Function(this, "GetWorksmanAccountRegistartionStatus", allLambda_1.GetWorksmanAccountRegistartionStatusLambda());
        const GetTestUser = new lambda.Function(this, "GetTestUser", allLambda_1.GetTestUserLambda());
        const PostTestUser = new lambda.Function(this, "PostTestUser", allLambda_1.PostTestUserLambda());
        const getAllMobileNumbersDemo = new lambda.Function(this, "getAllMobileNumber", allLambda_1.getAllMobileNumberLambda());
        const GetWorkmanDetailLambda = new lambda.Function(this, "GetWorkmanDetails", allLambda_1.GetWorkmanDetailsLambda());
        const UpdateWorksmanDetailLambda = new lambda.Function(this, "UpdateWorksmanDetail", allLambda_1.UpdateWorksmanDetailsLambda());
        const UserPostCodeLambdaApi = new lambda.Function(this, "UserPostCodes", allLambda_1.UserPostCodesLambda());
        const GetAllPostcodesLambdaApi = new lambda.Function(this, "GetAllPostcodes", allLambda_1.GetAllPostcodesLambda());
        const DeletePostcodesLambdaApi = new lambda.Function(this, "DeletePostcodes", allLambda_1.DeletePostcodesLambda());
        const WorksmnaScheduleLambdaApi = new lambda.Function(this, "WorksmnaScheduletcodes", allLambda_1.WorksmnaScheduleLambda());
        const DeleteWorkmanScheduleLambdaApi = new lambda.Function(this, "DeleteWorkmanSchedule", allLambda_1.DeleteWorkmanScheduleLambda());
        const GetWorksmanScheduleLambdaApi = new lambda.Function(this, "GetWorksmanSchedule", allLambda_1.GetWorksmanSchedulesLambda());
        const GetWorksmanjobsLambdaApi = new lambda.Function(this, "GetWorksmanjobs", allLambda_1.GetWorksmanjobsLambda());
        const WorksmanjobsCreateLambdaApi = new lambda.Function(this, "WorksmanjobsCreate", allLambda_1.WorksmanjobsCreateLambda());
        const CreateBankDetailsLambdaApi = new lambda.Function(this, "CreateBankDetails", allLambda_1.CreateBankDetailsLambda());
        const GetBankDetailsLambdaApi = new lambda.Function(this, "GetBankDetails", allLambda_1.GetBankDetailsLambda());
        const CreateMessagesLambdaApi = new lambda.Function(this, "CreateMessages", allLambda_1.CreateMessagesLambda());
        const GetMessagesLambdaApi = new lambda.Function(this, "GetMessages", allLambda_1.GetMessagesLambda());
        const api = new apigateway.RestApi(this, 'WorksManApiDefault', ApiGatewayConstant_1.ApigatewayDataConstants(apigateway));
        const userPool = new cognito.UserPool(this, 'userpool', {
            userPoolName: `vk-clean-portal`,
            removalPolicy: cdk.RemovalPolicy.DESTROY,
            selfSignUpEnabled: true,
            signInAliases: { email: true, phone: true },
            autoVerify: { email: true },
            passwordPolicy: {
                minLength: 6,
                requireLowercase: true,
                requireDigits: true,
                requireUppercase: true,
                requireSymbols: true,
            },
            standardAttributes: {
                givenName: {
                    required: true,
                    mutable: true
                },
                familyName: {
                    required: true,
                    mutable: true
                },
                email: {
                    required: true,
                    mutable: true
                },
                address: {
                    required: true,
                    mutable: true
                },
                birthdate: {
                    required: true,
                    mutable: true
                },
                gender: {
                    required: true,
                    mutable: true
                },
                locale: {
                    required: true,
                    mutable: true
                },
                phoneNumber: {
                    required: true,
                    mutable: true
                },
            },
            accountRecovery: cognito.AccountRecovery.EMAIL_ONLY,
        });
        const standardCognitoAttributes = {
            givenName: true,
            familyName: true,
            email: true,
            address: true,
            birthdate: true,
            gender: true,
            locale: true,
            phoneNumber: true,
        };
        const clientReadAttributes = new cognito.ClientAttributes()
            .withStandardAttributes(standardCognitoAttributes);
        const clientWriteAttributes = new cognito.ClientAttributes()
            .withStandardAttributes({
            ...standardCognitoAttributes,
            emailVerified: false,
            phoneNumberVerified: false,
        });
        const userPoolClient = new cognito.UserPoolClient(this, 'userpool-client', {
            userPool,
            authFlows: {
                adminUserPassword: true,
                custom: true,
                userSrp: true,
                userPassword: true
            },
            supportedIdentityProviders: [
                cognito.UserPoolClientIdentityProvider.COGNITO,
            ],
            readAttributes: clientReadAttributes,
            writeAttributes: clientWriteAttributes,
        });
        new cdk.CfnOutput(this, 'region', { value: cdk.Stack.of(this).region });
        new cdk.CfnOutput(this, 'userPoolId', { value: userPool.userPoolId });
        new cdk.CfnOutput(this, 'userPoolClientId', {
            value: userPoolClient.userPoolClientId,
        });
        new cdk.CfnOutput(this, 'apiUrl', { value: api.url });
        const auth = new apigateway.CognitoUserPoolsAuthorizer(this, 'Authorizer', {
            cognitoUserPools: [userPool]
        });
        // POST APIS
        AllApiGateWays_1.WorksmanTermsAndConditionsApiGateway(api, WorksManTermsAndCondition, 'POST', auth);
        AllApiGateWays_1.worksmanExperienceApiGateway(api, WorksManExperience, 'POST', auth);
        AllApiGateWays_1.PostUserApiGateway(api, PostTestUser, 'POST', auth);
        AllApiGateWays_1.UserPostCodesApiGateway(api, UserPostCodeLambdaApi, 'POST', auth);
        AllApiGateWays_1.WorksmnaScheduleApiGateway(api, WorksmnaScheduleLambdaApi, 'POST', auth);
        AllApiGateWays_1.WorksmanjobsCreateApiGateway(api, WorksmanjobsCreateLambdaApi, 'POST', auth);
        AllApiGateWays_1.CreateBankDetailsApiGateway(api, CreateBankDetailsLambdaApi, 'POST', auth);
        AllApiGateWays_1.CreateMessagesApiGateway(api, CreateMessagesLambdaApi, 'POST', auth);
        // GET APIS
        AllApiGateWays_1.GetWorksmanAccountRegistartionStatusApiGateway(api, GetWorksmanAccountRegistartionStatus, 'GET', auth);
        AllApiGateWays_1.GetTestUserApiGateway(api, GetTestUser, 'GET', auth);
        AllApiGateWays_1.getAllMobileNumbersApiGateway(api, getAllMobileNumbersDemo, 'GET');
        AllApiGateWays_1.GetWorkmanDetailsApiGateway(api, GetWorkmanDetailLambda, 'GET', auth);
        AllApiGateWays_1.GetAllPostcodesApiGateway(api, GetAllPostcodesLambdaApi, 'GET', auth);
        AllApiGateWays_1.GetWorksmanScheduleApiGateway(api, GetWorksmanScheduleLambdaApi, 'GET', auth);
        AllApiGateWays_1.GetWorksmanjobsApiGateway(api, GetWorksmanjobsLambdaApi, 'GET', auth);
        AllApiGateWays_1.GetBankDetailsApiGateway(api, GetBankDetailsLambdaApi, 'GET', auth);
        AllApiGateWays_1.GetMessagesApiGateway(api, GetMessagesLambdaApi, 'GET', auth);
        // DELETE APIS
        AllApiGateWays_1.DeletePostcodesApiGateway(api, DeletePostcodesLambdaApi, 'DELETE', auth);
        AllApiGateWays_1.DeleteWorkmanScheduleApiGateway(api, DeleteWorkmanScheduleLambdaApi, 'DELETE', auth);
        // UPDATE APIS
        AllApiGateWays_1.UpdateWorksmanDetailsApiGateway(api, UpdateWorksmanDetailLambda, 'PUT', auth);
    }
}
exports.CdkExampleStack = CdkExampleStack;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2RrLWV4YW1wbGUtc3RhY2suanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjZGstZXhhbXBsZS1zdGFjay50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxxQ0FBcUM7QUFDckMsOENBQThDO0FBQzlDLDREQWlCc0M7QUFHdEMsc0RBQXFEO0FBQ3JELHdFQUEwRTtBQUMxRSwwRUFpQitDO0FBRy9DLGdEQUFnRDtBQUVoRCxNQUFhLGVBQWdCLFNBQVEsR0FBRyxDQUFDLEtBQUs7SUFFNUMsWUFBWSxLQUFvQixFQUFFLEVBQVUsRUFBRSxLQUFzQjtRQUNsRSxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUV4QixNQUFNLGdCQUFnQixHQUFHLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCLEVBQUUsa0NBQXNCLEVBQUUsQ0FBQyxDQUFBO1FBQ2hHLE1BQU0seUJBQXlCLEdBQUcsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSwyQkFBMkIsRUFBRSwyQ0FBK0IsRUFBRSxDQUFDLENBQUE7UUFDM0gsTUFBTSxrQkFBa0IsR0FBRyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLG9CQUFvQixFQUFFLG9DQUF3QixFQUFFLENBQUMsQ0FBQTtRQUN0RyxNQUFNLG9DQUFvQyxHQUFHLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsc0NBQXNDLEVBQUUsc0RBQTBDLEVBQUUsQ0FBQyxDQUFBO1FBQzVKLE1BQU0sV0FBVyxHQUFHLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsYUFBYSxFQUFFLDZCQUFpQixFQUFFLENBQUMsQ0FBQTtRQUNqRixNQUFNLFlBQVksR0FBRyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLGNBQWMsRUFBRSw4QkFBa0IsRUFBRSxDQUFDLENBQUE7UUFDcEYsTUFBTSx1QkFBdUIs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QUF5QixDQUFDLEdBQUcsRUFBRSx3QkFBd0IsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDckUsOENBQTZCLENBQUMsR0FBRyxFQUFFLDRCQUE0QixFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUM3RSwwQ0FBeUIsQ0FBQyxHQUFHLEVBQUUsd0JBQXdCLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQ3JFLHlDQUF3QixDQUFDLEdBQUcsRUFBRSx1QkFBdUIsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDbkUsc0NBQXFCLENBQUMsR0FBRyxFQUFFLG9CQUFvQixFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUU3RCxjQUFjO1FBQ2QsMENBQXlCLENBQUMsR0FBRyxFQUFFLHdCQUF3QixFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUN4RSxnREFBK0IsQ0FBQyxHQUFHLEVBQUUsOEJBQThCLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFBO1FBRXBGLGNBQWM7UUFDZCxnREFBK0IsQ0FBQyxHQUFHLEVBQUUsMEJBQTBCLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFBO0lBRS9FLENBQUM7Q0FDRjtBQXJLRCwwQ0FxS0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBjZGsgZnJvbSAnQGF3cy1jZGsvY29yZSc7XHJcbmltcG9ydCAqIGFzIGxhbWJkYSBmcm9tICdAYXdzLWNkay9hd3MtbGFtYmRhJztcclxuaW1wb3J0IHtcclxuICBVc2VyUmVnaXN0cmF0aW9uTGFtYmRhLCBXb3Jrc01hblRlcm1zQW5kQ29uZGl0aW9uTGFtYmRhLCBXb3Jrc01hbkV4cGVyaWVuY2VMYW1iZGEsXHJcbiAgR2V0V29ya3NtYW5BY2NvdW50UmVnaXN0YXJ0aW9uU3RhdHVzTGFtYmRhLCBHZXRUZXN0VXNlckxhbWJkYSwgUG9zdFRlc3RVc2VyTGFtYmRhLCBnZXRBbGxNb2JpbGVOdW1iZXJMYW1iZGEsXHJcbiAgR2V0V29ya21hbkRldGFpbHNMYW1iZGEsXHJcbiAgVXBkYXRlV29ya3NtYW5EZXRhaWxzTGFtYmRhLFxyXG4gIFVzZXJQb3N0Q29kZXNMYW1iZGEsXHJcbiAgR2V0QWxsUG9zdGNvZGVzTGFtYmRhLFxyXG4gIERlbGV0ZVBvc3Rjb2Rlc0xhbWJkYSxcclxuICBXb3Jrc21uYVNjaGVkdWxlTGFtYmRhLFxyXG4gIERlbGV0ZVdvcmttYW5TY2hlZHVsZUxhbWJkYSxcclxuICBHZXRXb3Jrc21hblNjaGVkdWxlc0xhbWJkYSxcclxuICBHZXRXb3Jrc21hbmpvYnNMYW1iZGEsXHJcbiAgV29ya3NtYW5qb2JzQ3JlYXRlTGFtYmRhLFxyXG4gIEdldE1lc3NhZ2VzTGFtYmRhLFxyXG4gIENyZWF0ZU1lc3NhZ2VzTGFtYmRhLFxyXG4gIENyZWF0ZUJhbmtEZXRhaWxzTGFtYmRhLFxyXG4gIEdldEJhbmtEZXRhaWxzTGFtYmRhXHJcbn0gZnJvbSAnLi9yZXNvdXJjZXMvbGFtYmRhL2FsbExhbWJkYSc7XHJcbmltcG9ydCAqIGFzIHNmbiBmcm9tIFwiQGF3cy1jZGsvYXdzLXN0ZXBmdW5jdGlvbnNcIjtcclxuaW1wb3J0ICogYXMgdGFza3MgZnJvbSBcIkBhd3MtY2RrL2F3cy1zdGVwZnVuY3Rpb25zLXRhc2tzXCI7XHJcbmltcG9ydCAqIGFzIGFwaWdhdGV3YXkgZnJvbSBcIkBhd3MtY2RrL2F3cy1hcGlnYXRld2F5XCJcclxuaW1wb3J0IHsgQXBpZ2F0ZXdheURhdGFDb25zdGFudHMgfSBmcm9tICcuLi9jb25zdGFudHMvQXBpR2F0ZXdheUNvbnN0YW50JztcclxuaW1wb3J0IHtcclxuICBXb3Jrc21hblRlcm1zQW5kQ29uZGl0aW9uc0FwaUdhdGV3YXksIFBvc3RVc2VyQXBpR2F0ZXdheSwgZ2V0QWxsTW9iaWxlTnVtYmVyc0FwaUdhdGV3YXksXHJcbiAgd29ya3NtYW5FeHBlcmllbmNlQXBpR2F0ZXdheSwgR2V0V29ya3NtYW5BY2NvdW50UmVnaXN0YXJ0aW9uU3RhdHVzQXBpR2F0ZXdheSwgR2V0VGVzdFVzZXJBcGlHYXRld2F5LFxyXG4gIEdldFdvcmttYW5EZXRhaWxzQXBpR2F0ZXdheSxcclxuICBVcGRhdGVXb3Jrc21hbkRldGFpbHNBcGlHYXRld2F5LFxyXG4gIFVzZXJQb3N0Q29kZXNBcGlHYXRld2F5LFxyXG4gIEdldEFsbFBvc3Rjb2Rlc0FwaUdhdGV3YXksXHJcbiAgRGVsZXRlUG9zdGNvZGVzQXBpR2F0ZXdheSxcclxuICBXb3Jrc21uYVNjaGVkdWxlQXBpR2F0ZXdheSxcclxuICBEZWxldGVXb3JrbWFuU2NoZWR1bGVBcGlHYXRld2F5LFxyXG4gIEdldFdvcmtzbWFuU2NoZWR1bGVBcGlHYXRld2F5LFxyXG4gIEdldFdvcmtzbWFuam9ic0FwaUdhdGV3YXksXHJcbiAgV29ya3NtYW5qb2JzQ3JlYXRlQXBpR2F0ZXdheSxcclxuICBHZXRNZXNzYWdlc0FwaUdhdGV3YXksXHJcbiAgQ3JlYXRlTWVzc2FnZXNBcGlHYXRld2F5LFxyXG4gIENyZWF0ZUJhbmtEZXRhaWxzQXBpR2F0ZXdheSxcclxuICBHZXRCYW5rRGV0YWlsc0FwaUdhdGV3YXlcclxufSBmcm9tIFwiLi9yZXNvdXJjZXMvQXBpR2F0ZXdheS9BbGxBcGlHYXRlV2F5c1wiO1xyXG5pbXBvcnQgKiBhcyBhcGlHYXRld2F5QXV0aG9yaXplcnMgZnJvbSAnQGF3cy1jZGsvYXdzLWFwaWdhdGV3YXl2Mi1hdXRob3JpemVycyc7XHJcbmltcG9ydCAqIGFzIGFwaUdhdGV3YXlJbnRlZ3JhdGlvbnMgZnJvbSAnQGF3cy1jZGsvYXdzLWFwaWdhdGV3YXl2Mi1pbnRlZ3JhdGlvbnMnO1xyXG5pbXBvcnQgKiBhcyBjb2duaXRvIGZyb20gJ0Bhd3MtY2RrL2F3cy1jb2duaXRvJztcclxuXHJcbmV4cG9ydCBjbGFzcyBDZGtFeGFtcGxlU3RhY2sgZXh0ZW5kcyBjZGsuU3RhY2sge1xyXG4gIHB1YmxpYyBNYWNoaW5lOiBzZm4uU3RhdGVNYWNoaW5lO1xyXG4gIGNvbnN0cnVjdG9yKHNjb3BlOiBjZGsuQ29uc3RydWN0LCBpZDogc3RyaW5nLCBwcm9wcz86IGNkay5TdGFja1Byb3BzKSB7XHJcbiAgICBzdXBlcihzY29wZSwgaWQsIHByb3BzKTtcclxuXHJcbiAgICBjb25zdCB1c2VyUmVnaXN0cmF0aW9uID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCAnVXNlclJlZ2lzdHJhdGlvbicsIFVzZXJSZWdpc3RyYXRpb25MYW1iZGEoKSlcclxuICAgIGNvbnN0IFdvcmtzTWFuVGVybXNBbmRDb25kaXRpb24gPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsICdXb3Jrc01hblRlcm1zQW5kQ29uZGl0aW9uJywgV29ya3NNYW5UZXJtc0FuZENvbmRpdGlvbkxhbWJkYSgpKVxyXG4gICAgY29uc3QgV29ya3NNYW5FeHBlcmllbmNlID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCAnV29ya3NNYW5FeHBlcmllbmNlJywgV29ya3NNYW5FeHBlcmllbmNlTGFtYmRhKCkpXHJcbiAgICBjb25zdCBHZXRXb3Jrc21hbkFjY291bnRSZWdpc3RhcnRpb25TdGF0dXMgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsIFwiR2V0V29ya3NtYW5BY2NvdW50UmVnaXN0YXJ0aW9uU3RhdHVzXCIsIEdldFdvcmtzbWFuQWNjb3VudFJlZ2lzdGFydGlvblN0YXR1c0xhbWJkYSgpKVxyXG4gICAgY29uc3QgR2V0VGVzdFVzZXIgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsIFwiR2V0VGVzdFVzZXJcIiwgR2V0VGVzdFVzZXJMYW1iZGEoKSlcclxuICAgIGNvbnN0IFBvc3RUZXN0VXNlciA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJQb3N0VGVzdFVzZXJcIiwgUG9zdFRlc3RVc2VyTGFtYmRhKCkpXHJcbiAgICBjb25zdCBnZXRBbGxNb2JpbGVOdW1iZXJzRGVtbyA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJnZXRBbGxNb2JpbGVOdW1iZXJcIiwgZ2V0QWxsTW9iaWxlTnVtYmVyTGFtYmRhKCkpXHJcbiAgICBjb25zdCBHZXRXb3JrbWFuRGV0YWlsTGFtYmRhID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCBcIkdldFdvcmttYW5EZXRhaWxzXCIsIEdldFdvcmttYW5EZXRhaWxzTGFtYmRhKCkpXHJcbiAgICBjb25zdCBVcGRhdGVXb3Jrc21hbkRldGFpbExhbWJkYSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJVcGRhdGVXb3Jrc21hbkRldGFpbFwiLCBVcGRhdGVXb3Jrc21hbkRldGFpbHNMYW1iZGEoKSlcclxuICAgIGNvbnN0IFVzZXJQb3N0Q29kZUxhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJVc2VyUG9zdENvZGVzXCIsIFVzZXJQb3N0Q29kZXNMYW1iZGEoKSlcclxuICAgIGNvbnN0IEdldEFsbFBvc3Rjb2Rlc0xhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJHZXRBbGxQb3N0Y29kZXNcIiwgR2V0QWxsUG9zdGNvZGVzTGFtYmRhKCkpXHJcbiAgICBjb25zdCBEZWxldGVQb3N0Y29kZXNMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsIFwiRGVsZXRlUG9zdGNvZGVzXCIsIERlbGV0ZVBvc3Rjb2Rlc0xhbWJkYSgpKVxyXG4gICAgY29uc3QgV29ya3NtbmFTY2hlZHVsZUxhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJXb3Jrc21uYVNjaGVkdWxldGNvZGVzXCIsIFdvcmtzbW5hU2NoZWR1bGVMYW1iZGEoKSlcclxuICAgIGNvbnN0IERlbGV0ZVdvcmttYW5TY2hlZHVsZUxhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJEZWxldGVXb3JrbWFuU2NoZWR1bGVcIiwgRGVsZXRlV29ya21hblNjaGVkdWxlTGFtYmRhKCkpXHJcbiAgICBjb25zdCBHZXRXb3Jrc21hblNjaGVkdWxlTGFtYmRhQXBpID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCBcIkdldFdvcmtzbWFuU2NoZWR1bGVcIiwgR2V0V29ya3NtYW5TY2hlZHVsZXNMYW1iZGEoKSlcclxuICAgIGNvbnN0IEdldFdvcmtzbWFuam9ic0xhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJHZXRXb3Jrc21hbmpvYnNcIiwgR2V0V29ya3NtYW5qb2JzTGFtYmRhKCkpXHJcbiAgICBjb25zdCBXb3Jrc21hbmpvYnNDcmVhdGVMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsIFwiV29ya3NtYW5qb2JzQ3JlYXRlXCIsIFdvcmtzbWFuam9ic0NyZWF0ZUxhbWJkYSgpKVxyXG4gICAgY29uc3QgQ3JlYXRlQmFua0RldGFpbHNMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsIFwiQ3JlYXRlQmFua0RldGFpbHNcIiwgQ3JlYXRlQmFua0RldGFpbHNMYW1iZGEoKSlcclxuICAgIGNvbnN0IEdldEJhbmtEZXRhaWxzTGFtYmRhQXBpID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCBcIkdldEJhbmtEZXRhaWxzXCIsIEdldEJhbmtEZXRhaWxzTGFtYmRhKCkpXHJcbiAgICBjb25zdCBDcmVhdGVNZXNzYWdlc0xhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJDcmVhdGVNZXNzYWdlc1wiLCBDcmVhdGVNZXNzYWdlc0xhbWJkYSgpKVxyXG4gICAgY29uc3QgR2V0TWVzc2FnZXNMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsIFwiR2V0TWVzc2FnZXNcIiwgR2V0TWVzc2FnZXNMYW1iZGEoKSlcclxuXHJcbiAgICBjb25zdCBhcGkgPSBuZXcgYXBpZ2F0ZXdheS5SZXN0QXBpKHRoaXMsICdXb3Jrc01hbkFwaURlZmF1bHQnLCBBcGlnYXRld2F5RGF0YUNvbnN0YW50cyhhcGlnYXRld2F5KSk7XHJcblxyXG4gICAgY29uc3QgdXNlclBvb2wgPSBuZXcgY29nbml0by5Vc2VyUG9vbCh0aGlzLCAndXNlcnBvb2wnLCB7XHJcbiAgICAgIHVzZXJQb29sTmFtZTogYHZrLWNsZWFuLXBvcnRhbGAsXHJcbiAgICAgIHJlbW92YWxQb2xpY3k6IGNkay5SZW1vdmFsUG9saWN5LkRFU1RST1ksXHJcbiAgICAgIHNlbGZTaWduVXBFbmFibGVkOiB0cnVlLFxyXG4gICAgICBzaWduSW5BbGlhc2VzOiB7IGVtYWlsOiB0cnVlLCBwaG9uZTogdHJ1ZSB9LFxyXG4gICAgICBhdXRvVmVyaWZ5OiB7IGVtYWlsOiB0cnVlIH0sXHJcbiAgICAgIHBhc3N3b3JkUG9saWN5OiB7XHJcbiAgICAgICAgbWluTGVuZ3RoOiA2LFxyXG4gICAgICAgIHJlcXVpcmVMb3dlcmNhc2U6IHRydWUsXHJcbiAgICAgICAgcmVxdWlyZURpZ2l0czogdHJ1ZSxcclxuICAgICAgICByZXF1aXJlVXBwZXJjYXNlOiB0cnVlLFxyXG4gICAgICAgIHJlcXVpcmVTeW1ib2xzOiB0cnVlLFxyXG4gICAgICB9LFxyXG4gICAgIHN0YW5kYXJkQXR0cmlidXRlczp7XHJcbiAgICAgIGdpdmVuTmFtZToge1xyXG4gICAgICAgIHJlcXVpcmVkOnRydWUsXHJcbiAgICAgICAgbXV0YWJsZTp0cnVlXHJcbiAgICAgIH0sXHJcbiAgICAgIGZhbWlseU5hbWU6IHtcclxuICAgICAgICByZXF1aXJlZDp0cnVlLFxyXG4gICAgICAgIG11dGFibGU6dHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICBlbWFpbDoge1xyXG4gICAgICAgIHJlcXVpcmVkOnRydWUsXHJcbiAgICAgICAgbXV0YWJsZTp0cnVlXHJcbiAgICAgIH0sXHJcbiAgICAgIGFkZHJlc3M6IHtcclxuICAgICAgICByZXF1aXJlZDp0cnVlLFxyXG4gICAgICAgIG11dGFibGU6dHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICBiaXJ0aGRhdGU6IHtcclxuICAgICAgICByZXF1aXJlZDp0cnVlLFxyXG4gICAgICAgIG11dGFibGU6dHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICBnZW5kZXI6IHtcclxuICAgICAgICByZXF1aXJlZDp0cnVlLFxyXG4gICAgICAgIG11dGFibGU6dHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICBsb2NhbGU6IHtcclxuICAgICAgICByZXF1aXJlZDp0cnVlLFxyXG4gICAgICAgIG11dGFibGU6dHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICBwaG9uZU51bWJlcjoge1xyXG4gICAgICAgIHJlcXVpcmVkOnRydWUsXHJcbiAgICAgICAgbXV0YWJsZTp0cnVlXHJcbiAgICAgIH0sXHJcbiAgICAgfSxcclxuICAgICAgYWNjb3VudFJlY292ZXJ5OiBjb2duaXRvLkFjY291bnRSZWNvdmVyeS5FTUFJTF9PTkxZLFxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIGNvbnN0IHN0YW5kYXJkQ29nbml0b0F0dHJpYnV0ZXMgPSB7XHJcbiAgICAgIGdpdmVuTmFtZTogdHJ1ZSxcclxuICAgICAgZmFtaWx5TmFtZTogdHJ1ZSxcclxuICAgICAgZW1haWw6IHRydWUsXHJcbiAgICAgIGFkZHJlc3M6IHRydWUsXHJcbiAgICAgIGJpcnRoZGF0ZTogdHJ1ZSxcclxuICAgICAgZ2VuZGVyOiB0cnVlLFxyXG4gICAgICBsb2NhbGU6IHRydWUsXHJcbiAgICAgIHBob25lTnVtYmVyOiB0cnVlLFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgY29uc3QgY2xpZW50UmVhZEF0dHJpYnV0ZXMgPSBuZXcgY29nbml0by5DbGllbnRBdHRyaWJ1dGVzKClcclxuICAgICAgLndpdGhTdGFuZGFyZEF0dHJpYnV0ZXMoc3RhbmRhcmRDb2duaXRvQXR0cmlidXRlcylcclxuICAgIFxyXG4gICAgY29uc3QgY2xpZW50V3JpdGVBdHRyaWJ1dGVzID0gbmV3IGNvZ25pdG8uQ2xpZW50QXR0cmlidXRlcygpXHJcbiAgICAgIC53aXRoU3RhbmRhcmRBdHRyaWJ1dGVzKHtcclxuICAgICAgICAuLi5zdGFuZGFyZENvZ25pdG9BdHRyaWJ1dGVzLFxyXG4gICAgICAgIGVtYWlsVmVyaWZpZWQ6IGZhbHNlLFxyXG4gICAgICAgIHBob25lTnVtYmVyVmVyaWZpZWQ6IGZhbHNlLFxyXG4gICAgICB9KVxyXG5cclxuXHJcblxyXG4gICAgICBjb25zdCB1c2VyUG9vbENsaWVudCA9IG5ldyBjb2duaXRvLlVzZXJQb29sQ2xpZW50KHRoaXMsICd1c2VycG9vbC1jbGllbnQnLCB7XHJcbiAgICAgICAgdXNlclBvb2wsXHJcbiAgICAgICAgYXV0aEZsb3dzOiB7ICBcclxuICAgICAgICAgIGFkbWluVXNlclBhc3N3b3JkOiB0cnVlLFxyXG4gICAgICAgICAgY3VzdG9tOiB0cnVlLFxyXG4gICAgICAgICAgdXNlclNycDogdHJ1ZSxcclxuICAgICAgICAgIHVzZXJQYXNzd29yZDp0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdXBwb3J0ZWRJZGVudGl0eVByb3ZpZGVyczogW1xyXG4gICAgICAgICAgY29nbml0by5Vc2VyUG9vbENsaWVudElkZW50aXR5UHJvdmlkZXIuQ09HTklUTyxcclxuICAgICAgICBdLFxyXG4gICAgICAgIHJlYWRBdHRyaWJ1dGVzOiBjbGllbnRSZWFkQXR0cmlidXRlcyxcclxuICAgICAgICB3cml0ZUF0dHJpYnV0ZXM6IGNsaWVudFdyaXRlQXR0cmlidXRlcyxcclxuICAgICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICBuZXcgY2RrLkNmbk91dHB1dCh0aGlzLCAncmVnaW9uJywgeyB2YWx1ZTogY2RrLlN0YWNrLm9mKHRoaXMpLnJlZ2lvbiB9KTtcclxuICAgIG5ldyBjZGsuQ2ZuT3V0cHV0KHRoaXMsICd1c2VyUG9vbElkJywgeyB2YWx1ZTogdXNlclBvb2wudXNlclBvb2xJZCB9KTtcclxuICAgIG5ldyBjZGsuQ2ZuT3V0cHV0KHRoaXMsICd1c2VyUG9vbENsaWVudElkJywge1xyXG4gICAgICB2YWx1ZTogdXNlclBvb2xDbGllbnQudXNlclBvb2xDbGllbnRJZCxcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBuZXcgY2RrLkNmbk91dHB1dCh0aGlzLCAnYXBpVXJsJywgeyB2YWx1ZTogYXBpLnVybCB9KTtcclxuXHJcblxyXG5cclxuICAgIGNvbnN0IGF1dGggPSBuZXcgYXBpZ2F0ZXdheS5Db2duaXRvVXNlclBvb2xzQXV0aG9yaXplcih0aGlzLCAnQXV0aG9yaXplcicsIHtcclxuICAgICAgY29nbml0b1VzZXJQb29sczogW3VzZXJQb29sXVxyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAvLyBQT1NUIEFQSVNcclxuICAgIFdvcmtzbWFuVGVybXNBbmRDb25kaXRpb25zQXBpR2F0ZXdheShhcGksIFdvcmtzTWFuVGVybXNBbmRDb25kaXRpb24sICdQT1NUJywgYXV0aClcclxuICAgIHdvcmtzbWFuRXhwZXJpZW5jZUFwaUdhdGV3YXkoYXBpLCBXb3Jrc01hbkV4cGVyaWVuY2UsICdQT1NUJywgYXV0aClcclxuICAgIFBvc3RVc2VyQXBpR2F0ZXdheShhcGksIFBvc3RUZXN0VXNlciwgJ1BPU1QnLCBhdXRoKVxyXG4gICAgVXNlclBvc3RDb2Rlc0FwaUdhdGV3YXkoYXBpLCBVc2VyUG9zdENvZGVMYW1iZGFBcGksICdQT1NUJywgYXV0aClcclxuICAgIFdvcmtzbW5hU2NoZWR1bGVBcGlHYXRld2F5KGFwaSwgV29ya3NtbmFTY2hlZHVsZUxhbWJkYUFwaSwgJ1BPU1QnLCBhdXRoKVxyXG4gICAgV29ya3NtYW5qb2JzQ3JlYXRlQXBpR2F0ZXdheShhcGksIFdvcmtzbWFuam9ic0NyZWF0ZUxhbWJkYUFwaSwgJ1BPU1QnLCBhdXRoKVxyXG4gICAgQ3JlYXRlQmFua0RldGFpbHNBcGlHYXRld2F5KGFwaSwgQ3JlYXRlQmFua0RldGFpbHNMYW1iZGFBcGksICdQT1NUJywgYXV0aClcclxuICAgIENyZWF0ZU1lc3NhZ2VzQXBpR2F0ZXdheShhcGksIENyZWF0ZU1lc3NhZ2VzTGFtYmRhQXBpLCAnUE9TVCcsIGF1dGgpXHJcblxyXG4gICAgLy8gR0VUIEFQSVNcclxuICAgIEdldFdvcmtzbWFuQWNjb3VudFJlZ2lzdGFydGlvblN0YXR1c0FwaUdhdGV3YXkoYXBpLCBHZXRXb3Jrc21hbkFjY291bnRSZWdpc3RhcnRpb25TdGF0dXMsICdHRVQnLCBhdXRoKVxyXG4gICAgR2V0VGVzdFVzZXJBcGlHYXRld2F5KGFwaSwgR2V0VGVzdFVzZXIsICdHRVQnLCBhdXRoKVxyXG4gICAgZ2V0QWxsTW9iaWxlTnVtYmVyc0FwaUdhdGV3YXkoYXBpLCBnZXRBbGxNb2JpbGVOdW1iZXJzRGVtbywgJ0dFVCcpXHJcbiAgICBHZXRXb3JrbWFuRGV0YWlsc0FwaUdhdGV3YXkoYXBpLCBHZXRXb3JrbWFuRGV0YWlsTGFtYmRhLCAnR0VUJywgYXV0aClcclxuICAgIEdldEFsbFBvc3Rjb2Rlc0FwaUdhdGV3YXkoYXBpLCBHZXRBbGxQb3N0Y29kZXNMYW1iZGFBcGksICdHRVQnLCBhdXRoKVxyXG4gICAgR2V0V29ya3NtYW5TY2hlZHVsZUFwaUdhdGV3YXkoYXBpLCBHZXRXb3Jrc21hblNjaGVkdWxlTGFtYmRhQXBpLCAnR0VUJywgYXV0aClcclxuICAgIEdldFdvcmtzbWFuam9ic0FwaUdhdGV3YXkoYXBpLCBHZXRXb3Jrc21hbmpvYnNMYW1iZGFBcGksICdHRVQnLCBhdXRoKVxyXG4gICAgR2V0QmFua0RldGFpbHNBcGlHYXRld2F5KGFwaSwgR2V0QmFua0RldGFpbHNMYW1iZGFBcGksICdHRVQnLCBhdXRoKVxyXG4gICAgR2V0TWVzc2FnZXNBcGlHYXRld2F5KGFwaSwgR2V0TWVzc2FnZXNMYW1iZGFBcGksICdHRVQnLCBhdXRoKVxyXG5cclxuICAgIC8vIERFTEVURSBBUElTXHJcbiAgICBEZWxldGVQb3N0Y29kZXNBcGlHYXRld2F5KGFwaSwgRGVsZXRlUG9zdGNvZGVzTGFtYmRhQXBpLCAnREVMRVRFJywgYXV0aClcclxuICAgIERlbGV0ZVdvcmttYW5TY2hlZHVsZUFwaUdhdGV3YXkoYXBpLCBEZWxldGVXb3JrbWFuU2NoZWR1bGVMYW1iZGFBcGksICdERUxFVEUnLCBhdXRoKVxyXG5cclxuICAgIC8vIFVQREFURSBBUElTXHJcbiAgICBVcGRhdGVXb3Jrc21hbkRldGFpbHNBcGlHYXRld2F5KGFwaSwgVXBkYXRlV29ya3NtYW5EZXRhaWxMYW1iZGEsICdQVVQnLCBhdXRoKVxyXG5cclxuICB9XHJcbn0iXX0=