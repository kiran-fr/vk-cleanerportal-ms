"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CdkExampleStack = void 0;
const cdk = require("@aws-cdk/core");
const lambda = require("@aws-cdk/aws-lambda");
const alllambda_1 = require("./resources/lambda/alllambda");
const apigateway = require("@aws-cdk/aws-apigateway");
const ApiGatewayConstant_1 = require("../constants/ApiGatewayConstant");
const AllApiGateWays_1 = require("./resources/ApiGateway/AllApiGateWays");
const cognito = require("@aws-cdk/aws-cognito");
class CdkExampleStack extends cdk.Stack {
    // public readonly urlOutput: CfnOutput;
    constructor(scope, id, props) {
        super(scope, id, props);
        const userRegistration = new lambda.Function(this, 'UserRegistration', alllambda_1.UserRegistrationLambda());
        const WorksManTermsAndCondition = new lambda.Function(this, 'WorksManTermsAndCondition', alllambda_1.WorksManTermsAndConditionLambda());
        const WorksManExperience = new lambda.Function(this, 'WorksManExperience', alllambda_1.WorksManExperienceLambda());
        const GetWorksmanAccountRegistartionStatus = new lambda.Function(this, "GetWorksmanAccountRegistartionStatus", alllambda_1.GetWorksmanAccountRegistartionStatusLambda());
        const getAllMobileNumbersDemo = new lambda.Function(this, "getAllMobileNumber", alllambda_1.getAllMobileNumberLambda());
        const GetWorkmanDetailLambda = new lambda.Function(this, "GetWorkmanDetails", alllambda_1.GetWorkmanDetailsLambda());
        const UpdateWorksmanDetailLambda = new lambda.Function(this, "UpdateWorksmanDetail", alllambda_1.UpdateWorksmanDetailsLambda());
        const UserPostCodeLambdaApi = new lambda.Function(this, "UserPostCodes", alllambda_1.UserPostCodesLambda());
        const GetAllPostcodesLambdaApi = new lambda.Function(this, "GetAllPostcodes", alllambda_1.GetAllPostcodesLambda());
        const DeletePostcodesLambdaApi = new lambda.Function(this, "DeletePostcodes", alllambda_1.DeletePostcodesLambda());
        const CreateWorksmanScheduleLambdaApi = new lambda.Function(this, "CreateWorksmanSchedule", alllambda_1.CreateWorksmanScheduleLambda());
        const DeleteWorkmanScheduleLambdaApi = new lambda.Function(this, "DeleteWorkmanSchedule", alllambda_1.DeleteWorkmanScheduleLambda());
        const GetWorksmanScheduleLambdaApi = new lambda.Function(this, "GetWorksmanSchedule", alllambda_1.GetWorksmanSchedulesLambda());
        const GetWorksmanjobsLambdaApi = new lambda.Function(this, "GetWorksmanjobs", alllambda_1.GetWorksmanjobsLambda());
        const WorksmanjobsCreateLambdaApi = new lambda.Function(this, "WorksmanjobsCreate", alllambda_1.WorksmanjobsCreateLambda());
        const CreateBankDetailsLambdaApi = new lambda.Function(this, "CreateBankDetails", alllambda_1.CreateBankDetailsLambda());
        const GetBankDetailsLambdaApi = new lambda.Function(this, "GetBankDetails", alllambda_1.GetBankDetailsLambda());
        const CreateMessagesLambdaApi = new lambda.Function(this, "CreateMessages", alllambda_1.CreateMessagesLambda());
        const GetMessagesLambdaApi = new lambda.Function(this, "GetMessages", alllambda_1.GetMessagesLambda());
        const CreateCustomerTableLambdaApi = new lambda.Function(this, "CreateCustomerTable", alllambda_1.CreateCustomerTableLambda());
        const CreateCustomerAddressLambdaApi = new lambda.Function(this, "CreateCustomerAddress", alllambda_1.CreateCustomerAddressLambda());
        const GetJobsLambdaApi = new lambda.Function(this, "GetJobs", alllambda_1.GetJobsLambda());
        const GetListOfJobsBasedOnMonthLambdaApi = new lambda.Function(this, "GetListOfJobsBasedOnMonth", alllambda_1.GetListOfJobsBasedOnMonthLambda());
        const GetPaymentDetailsLambdaApi = new lambda.Function(this, "GetPaymentDetails", alllambda_1.GetPaymentDetailsLambda());
        const CreatePaymentHistoryDetailsLambdaApi = new lambda.Function(this, "CreatePaymentHistoryDetails", alllambda_1.CreatePaymentHistoryDetailsLambda());
        const GetPaymentHistoryDetailsLambdaApi = new lambda.Function(this, "GetPaymentHistoryDetails", alllambda_1.GetPaymentHistoryDetailsLambda());
        const GetDistrictWisePostCodesLambdaApi = new lambda.Function(this, "GetDistrictWisePostCodes", alllambda_1.GetDistrictWisePostCodesLambda());
        const UpdateBankDetailsLambdaApi = new lambda.Function(this, "UpdateBankDetails", alllambda_1.UpdateBankDetailsLambda());
        const api = new apigateway.RestApi(this, 'WorksmanApiData', ApiGatewayConstant_1.ApigatewayDataConstants(apigateway));
        const userPool = new cognito.UserPool(this, 'userpool', {
            userPoolName: `vk-clean-portal`,
            removalPolicy: cdk.RemovalPolicy.DESTROY,
            selfSignUpEnabled: true,
            signInAliases: { email: true, phone: true },
            autoVerify: { email: true },
            passwordPolicy: {
                minLength: 6,
                requireLowercase: true,
                requireDigits: true,
                requireUppercase: true,
                requireSymbols: true,
            },
            standardAttributes: {
                givenName: {
                    required: true,
                    mutable: true
                },
                familyName: {
                    required: true,
                    mutable: true
                },
                email: {
                    required: true,
                    mutable: true
                },
                address: {
                    required: true,
                    mutable: true
                },
                birthdate: {
                    required: true,
                    mutable: true
                },
                gender: {
                    required: true,
                    mutable: true
                },
                locale: {
                    required: true,
                    mutable: true
                },
                phoneNumber: {
                    required: true,
                    mutable: true
                },
            },
            accountRecovery: cognito.AccountRecovery.EMAIL_ONLY,
        });
        const standardCognitoAttributes = {
            givenName: true,
            familyName: true,
            email: true,
            address: true,
            birthdate: true,
            gender: true,
            locale: true,
            phoneNumber: true,
        };
        const clientReadAttributes = new cognito.ClientAttributes()
            .withStandardAttributes(standardCognitoAttributes);
        const clientWriteAttributes = new cognito.ClientAttributes()
            .withStandardAttributes({
            ...standardCognitoAttributes,
            emailVerified: false,
            phoneNumberVerified: false,
        });
        const userPoolClient = new cognito.UserPoolClient(this, 'userpool-client', {
            userPool,
            authFlows: {
                adminUserPassword: true,
                custom: true,
                userSrp: true,
                userPassword: true
            },
            supportedIdentityProviders: [
                cognito.UserPoolClientIdentityProvider.COGNITO,
            ],
            readAttributes: clientReadAttributes,
            writeAttributes: clientWriteAttributes,
        });
        new cdk.CfnOutput(this, 'region', { value: cdk.Stack.of(this).region });
        new cdk.CfnOutput(this, 'userPoolId', { value: userPool.userPoolId });
        new cdk.CfnOutput(this, 'userPoolClientId', {
            value: userPoolClient.userPoolClientId,
        });
        new cdk.CfnOutput(this, 'apiUrl', { value: api.url });
        const auth = new apigateway.CognitoUserPoolsAuthorizer(this, 'Authorizer', {
            cognitoUserPools: [userPool]
        });
        // POST APIS
        AllApiGateWays_1.WorksmanTermsAndConditionsApiGateway(api, WorksManTermsAndCondition, 'POST', auth);
        AllApiGateWays_1.worksmanExperienceApiGateway(api, WorksManExperience, 'POST', auth);
        // PostUserApiGateway(api, PostTestUser, 'POST', auth)
        AllApiGateWays_1.createPostcodesApiGateway(api, UserPostCodeLambdaApi, 'POST', auth);
        AllApiGateWays_1.CreateWorksmanScheduleApiGateway(api, CreateWorksmanScheduleLambdaApi, 'POST', auth);
        AllApiGateWays_1.WorksmanjobsCreateApiGateway(api, WorksmanjobsCreateLambdaApi, 'POST', auth);
        AllApiGateWays_1.CreateBankDetailsApiGateway(api, CreateBankDetailsLambdaApi, 'POST', auth);
        AllApiGateWays_1.CreateMessagesApiGateway(api, CreateMessagesLambdaApi, 'POST', auth);
        // CreateCustomerTableApiGateway(api, CreateCustomerTableLambdaApi, 'POST', auth)
        // CreateCustomerAddressApiGateway(api, CreateCustomerTableLambdaApi, 'POST', auth)
        // // CreatePaymentHistoryDetailsApiGateway(api, CreateCustomerTableLambdaApi, 'POST', auth)
        // // GET APIS
        AllApiGateWays_1.GetWorksmanAccountRegistartionStatusApiGateway(api, GetWorksmanAccountRegistartionStatus, 'GET', auth);
        // GetTestUserApiGateway(api, GetTestUser, 'GET', auth)
        AllApiGateWays_1.getAllMobileNumbersApiGateway(api, getAllMobileNumbersDemo, 'GET');
        AllApiGateWays_1.GetWorkmanDetailsApiGateway(api, GetWorkmanDetailLambda, 'GET', auth);
        AllApiGateWays_1.GetAllPostcodesApiGateway(api, GetAllPostcodesLambdaApi, 'GET', auth);
        AllApiGateWays_1.GetWorksmanScheduleApiGateway(api, GetWorksmanScheduleLambdaApi, 'GET', auth);
        AllApiGateWays_1.GetWorksmanjobsApiGateway(api, GetWorksmanjobsLambdaApi, 'GET', auth);
        AllApiGateWays_1.GetBankDetailsApiGateway(api, GetBankDetailsLambdaApi, 'GET', auth);
        AllApiGateWays_1.GetMessagesApiGateway(api, GetMessagesLambdaApi, 'GET', auth);
        AllApiGateWays_1.GetJobsApiGateway(api, GetJobsLambdaApi, 'GET', auth);
        AllApiGateWays_1.GetListOfJobsBasedOnMonthApiGateway(api, GetListOfJobsBasedOnMonthLambdaApi, 'GET', auth);
        AllApiGateWays_1.GetPaymentDetailsApiGateway(api, GetPaymentDetailsLambdaApi, 'GET', auth);
        AllApiGateWays_1.GetPaymentHistoryDetailsApiGateway(api, GetPaymentHistoryDetailsLambdaApi, 'GET', auth);
        AllApiGateWays_1.GetDistrictWisePostCodesApiGateway(api, GetDistrictWisePostCodesLambdaApi, 'GET', auth);
        // // DELETE APIS
        AllApiGateWays_1.DeletePostcodesApiGateway(api, DeletePostcodesLambdaApi, 'DELETE', auth);
        AllApiGateWays_1.DeleteWorkmanScheduleApiGateway(api, DeleteWorkmanScheduleLambdaApi, 'DELETE', auth);
        // // UPDATE APIS
        AllApiGateWays_1.UpdateWorksmanDetailsApiGateway(api, UpdateWorksmanDetailLambda, 'PUT', auth);
        AllApiGateWays_1.UpdateBankDetailsApiGateway(api, UpdateBankDetailsLambdaApi, 'PUT', auth);
    }
}
exports.CdkExampleStack = CdkExampleStack;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2RrLWV4YW1wbGUtc3RhY2suanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjZGstZXhhbXBsZS1zdGFjay50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxxQ0FBcUM7QUFDckMsOENBQThDO0FBQzlDLDREQTBCc0M7QUFFdEMsc0RBQXFEO0FBQ3JELHdFQUEwRTtBQUMxRSwwRUEwQitDO0FBQy9DLGdEQUFnRDtBQUVoRCxNQUFhLGVBQWdCLFNBQVEsR0FBRyxDQUFDLEtBQUs7SUFFNUMsd0NBQXdDO0lBQ3hDLFlBQVksS0FBb0IsRUFBRSxFQUFVLEVBQUUsS0FBc0I7UUFDbEUsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFFeEIsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLGtCQUFrQixFQUFFLGtDQUFzQixFQUFFLENBQUMsQ0FBQTtRQUNoRyxNQUFNLHlCQUF5QixHQUFHLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsMkJBQTJCLEVBQUUsMkNBQStCLEVBQUUsQ0FBQyxDQUFBO1FBQzNILE1BQU0sa0JBQWtCLEdBQUcsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxvQkFBb0IsRUFBRSxvQ0FBd0IsRUFBRSxDQUFDLENBQUE7UUFDdEcsTUFBTSxvQ0FBb0MsR0FBRyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLHNDQUFzQyxFQUFFLHNEQUEwQyxFQUFFLENBQUMsQ0FBQTtRQUM1SixNQUFNLHVCQUF1QixHQUFHLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsb0JBQW9CLEVBQUUsb0NBQXdCLEVBQUUsQ0FBQyxDQUFBO1FBQzNHLE1BQU0sc0JBQXNCLEdBQUcsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxtQkFBbUIsRUFBRSxtQ0FBdUIsRUFBRSxDQUFDLENB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QUUsSUFBSSxDQUFDLENBQUE7UUFDN0Qsa0NBQWlCLENBQUMsR0FBRyxFQUFFLGdCQUFnQixFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUNyRCxvREFBbUMsQ0FBQyxHQUFHLEVBQUUsa0NBQWtDLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQ3pGLDRDQUEyQixDQUFDLEdBQUcsRUFBRSwwQkFBMEIsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDekUsbURBQWtDLENBQUMsR0FBRyxFQUFFLGlDQUFpQyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUN2RixtREFBa0MsQ0FBQyxHQUFHLEVBQUUsaUNBQWlDLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFBO1FBRXZGLGlCQUFpQjtRQUNqQiwwQ0FBeUIsQ0FBQyxHQUFHLEVBQUUsd0JBQXdCLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQ3hFLGdEQUErQixDQUFDLEdBQUcsRUFBRSw4QkFBOEIsRUFBRSxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFFcEYsaUJBQWlCO1FBQ2pCLGdEQUErQixDQUFDLEdBQUcsRUFBRSwwQkFBMEIsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDN0UsNENBQTJCLENBQUMsR0FBRyxFQUFFLDBCQUEwQixFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQTtJQUUzRSxDQUFDO0NBQ0Y7QUF2TEQsMENBdUxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgY2RrIGZyb20gJ0Bhd3MtY2RrL2NvcmUnO1xyXG5pbXBvcnQgKiBhcyBsYW1iZGEgZnJvbSAnQGF3cy1jZGsvYXdzLWxhbWJkYSc7XHJcbmltcG9ydCB7XHJcbiAgVXNlclJlZ2lzdHJhdGlvbkxhbWJkYSwgV29ya3NNYW5UZXJtc0FuZENvbmRpdGlvbkxhbWJkYSwgV29ya3NNYW5FeHBlcmllbmNlTGFtYmRhLFxyXG4gIEdldFdvcmtzbWFuQWNjb3VudFJlZ2lzdGFydGlvblN0YXR1c0xhbWJkYSwgZ2V0QWxsTW9iaWxlTnVtYmVyTGFtYmRhLFxyXG4gIEdldFdvcmttYW5EZXRhaWxzTGFtYmRhLFxyXG4gIFVwZGF0ZVdvcmtzbWFuRGV0YWlsc0xhbWJkYSxcclxuICBVc2VyUG9zdENvZGVzTGFtYmRhLFxyXG4gIEdldEFsbFBvc3Rjb2Rlc0xhbWJkYSxcclxuICBEZWxldGVQb3N0Y29kZXNMYW1iZGEsXHJcbiAgQ3JlYXRlV29ya3NtYW5TY2hlZHVsZUxhbWJkYSxcclxuICBEZWxldGVXb3JrbWFuU2NoZWR1bGVMYW1iZGEsXHJcbiAgR2V0V29ya3NtYW5TY2hlZHVsZXNMYW1iZGEsXHJcbiAgR2V0V29ya3NtYW5qb2JzTGFtYmRhLFxyXG4gIFdvcmtzbWFuam9ic0NyZWF0ZUxhbWJkYSxcclxuICBHZXRNZXNzYWdlc0xhbWJkYSxcclxuICBDcmVhdGVNZXNzYWdlc0xhbWJkYSxcclxuICBDcmVhdGVCYW5rRGV0YWlsc0xhbWJkYSxcclxuICBHZXRCYW5rRGV0YWlsc0xhbWJkYSxcclxuICBDcmVhdGVDdXN0b21lclRhYmxlTGFtYmRhLFxyXG4gIENyZWF0ZUN1c3RvbWVyQWRkcmVzc0xhbWJkYSxcclxuICBHZXRKb2JzTGFtYmRhLFxyXG4gIEdldFBheW1lbnREZXRhaWxzTGFtYmRhLFxyXG4gIENyZWF0ZVBheW1lbnRIaXN0b3J5RGV0YWlsc0xhbWJkYSxcclxuICBHZXRQYXltZW50SGlzdG9yeURldGFpbHNMYW1iZGEsXHJcbiAgR2V0RGlzdHJpY3RXaXNlUG9zdENvZGVzTGFtYmRhLFxyXG4gIFVwZGF0ZUJhbmtEZXRhaWxzTGFtYmRhLFxyXG4gIEdldExpc3RPZkpvYnNCYXNlZE9uTW9udGhMYW1iZGFcclxufSBmcm9tICcuL3Jlc291cmNlcy9sYW1iZGEvYWxsbGFtYmRhJztcclxuaW1wb3J0ICogYXMgc2ZuIGZyb20gXCJAYXdzLWNkay9hd3Mtc3RlcGZ1bmN0aW9uc1wiO1xyXG5pbXBvcnQgKiBhcyBhcGlnYXRld2F5IGZyb20gXCJAYXdzLWNkay9hd3MtYXBpZ2F0ZXdheVwiXHJcbmltcG9ydCB7IEFwaWdhdGV3YXlEYXRhQ29uc3RhbnRzIH0gZnJvbSAnLi4vY29uc3RhbnRzL0FwaUdhdGV3YXlDb25zdGFudCc7XHJcbmltcG9ydCB7XHJcbiAgV29ya3NtYW5UZXJtc0FuZENvbmRpdGlvbnNBcGlHYXRld2F5LCBnZXRBbGxNb2JpbGVOdW1iZXJzQXBpR2F0ZXdheSxcclxuICB3b3Jrc21hbkV4cGVyaWVuY2VBcGlHYXRld2F5LCBHZXRXb3Jrc21hbkFjY291bnRSZWdpc3RhcnRpb25TdGF0dXNBcGlHYXRld2F5LFxyXG4gIEdldFdvcmttYW5EZXRhaWxzQXBpR2F0ZXdheSxcclxuICBVcGRhdGVXb3Jrc21hbkRldGFpbHNBcGlHYXRld2F5LFxyXG4gIGNyZWF0ZVBvc3Rjb2Rlc0FwaUdhdGV3YXksXHJcbiAgR2V0QWxsUG9zdGNvZGVzQXBpR2F0ZXdheSxcclxuICBEZWxldGVQb3N0Y29kZXNBcGlHYXRld2F5LFxyXG4gIENyZWF0ZVdvcmtzbWFuU2NoZWR1bGVBcGlHYXRld2F5LFxyXG4gIERlbGV0ZVdvcmttYW5TY2hlZHVsZUFwaUdhdGV3YXksXHJcbiAgR2V0V29ya3NtYW5TY2hlZHVsZUFwaUdhdGV3YXksXHJcbiAgR2V0V29ya3NtYW5qb2JzQXBpR2F0ZXdheSxcclxuICBXb3Jrc21hbmpvYnNDcmVhdGVBcGlHYXRld2F5LFxyXG4gIEdldE1lc3NhZ2VzQXBpR2F0ZXdheSxcclxuICBDcmVhdGVNZXNzYWdlc0FwaUdhdGV3YXksXHJcbiAgQ3JlYXRlQmFua0RldGFpbHNBcGlHYXRld2F5LFxyXG4gIEdldEJhbmtEZXRhaWxzQXBpR2F0ZXdheSxcclxuICBDcmVhdGVDdXN0b21lclRhYmxlQXBpR2F0ZXdheSxcclxuICBDcmVhdGVDdXN0b21lckFkZHJlc3NBcGlHYXRld2F5LFxyXG4gIEdldEpvYnNBcGlHYXRld2F5LFxyXG4gIEdldFBheW1lbnREZXRhaWxzQXBpR2F0ZXdheSxcclxuICBDcmVhdGVQYXltZW50SGlzdG9yeURldGFpbHNBcGlHYXRld2F5LFxyXG4gIEdldFBheW1lbnRIaXN0b3J5RGV0YWlsc0FwaUdhdGV3YXksXHJcbiAgR2V0RGlzdHJpY3RXaXNlUG9zdENvZGVzQXBpR2F0ZXdheSxcclxuICBVcGRhdGVCYW5rRGV0YWlsc0FwaUdhdGV3YXksXHJcbiAgR2V0TGlzdE9mSm9ic0Jhc2VkT25Nb250aEFwaUdhdGV3YXlcclxufSBmcm9tIFwiLi9yZXNvdXJjZXMvQXBpR2F0ZXdheS9BbGxBcGlHYXRlV2F5c1wiO1xyXG5pbXBvcnQgKiBhcyBjb2duaXRvIGZyb20gJ0Bhd3MtY2RrL2F3cy1jb2duaXRvJztcclxuXHJcbmV4cG9ydCBjbGFzcyBDZGtFeGFtcGxlU3RhY2sgZXh0ZW5kcyBjZGsuU3RhY2sge1xyXG4gIHB1YmxpYyBNYWNoaW5lOiBzZm4uU3RhdGVNYWNoaW5lO1xyXG4gIC8vIHB1YmxpYyByZWFkb25seSB1cmxPdXRwdXQ6IENmbk91dHB1dDtcclxuICBjb25zdHJ1Y3RvcihzY29wZTogY2RrLkNvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM/OiBjZGsuU3RhY2tQcm9wcykge1xyXG4gICAgc3VwZXIoc2NvcGUsIGlkLCBwcm9wcyk7XHJcblxyXG4gICAgY29uc3QgdXNlclJlZ2lzdHJhdGlvbiA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgJ1VzZXJSZWdpc3RyYXRpb24nLCBVc2VyUmVnaXN0cmF0aW9uTGFtYmRhKCkpXHJcbiAgICBjb25zdCBXb3Jrc01hblRlcm1zQW5kQ29uZGl0aW9uID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCAnV29ya3NNYW5UZXJtc0FuZENvbmRpdGlvbicsIFdvcmtzTWFuVGVybXNBbmRDb25kaXRpb25MYW1iZGEoKSlcclxuICAgIGNvbnN0IFdvcmtzTWFuRXhwZXJpZW5jZSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgJ1dvcmtzTWFuRXhwZXJpZW5jZScsIFdvcmtzTWFuRXhwZXJpZW5jZUxhbWJkYSgpKVxyXG4gICAgY29uc3QgR2V0V29ya3NtYW5BY2NvdW50UmVnaXN0YXJ0aW9uU3RhdHVzID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCBcIkdldFdvcmtzbWFuQWNjb3VudFJlZ2lzdGFydGlvblN0YXR1c1wiLCBHZXRXb3Jrc21hbkFjY291bnRSZWdpc3RhcnRpb25TdGF0dXNMYW1iZGEoKSlcclxuICAgIGNvbnN0IGdldEFsbE1vYmlsZU51bWJlcnNEZW1vID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCBcImdldEFsbE1vYmlsZU51bWJlclwiLCBnZXRBbGxNb2JpbGVOdW1iZXJMYW1iZGEoKSlcclxuICAgIGNvbnN0IEdldFdvcmttYW5EZXRhaWxMYW1iZGEgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsIFwiR2V0V29ya21hbkRldGFpbHNcIiwgR2V0V29ya21hbkRldGFpbHNMYW1iZGEoKSlcclxuICAgIGNvbnN0IFVwZGF0ZVdvcmtzbWFuRGV0YWlsTGFtYmRhID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCBcIlVwZGF0ZVdvcmtzbWFuRGV0YWlsXCIsIFVwZGF0ZVdvcmtzbWFuRGV0YWlsc0xhbWJkYSgpKVxyXG4gICAgY29uc3QgVXNlclBvc3RDb2RlTGFtYmRhQXBpID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCBcIlVzZXJQb3N0Q29kZXNcIiwgVXNlclBvc3RDb2Rlc0xhbWJkYSgpKVxyXG4gICAgY29uc3QgR2V0QWxsUG9zdGNvZGVzTGFtYmRhQXBpID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCBcIkdldEFsbFBvc3Rjb2Rlc1wiLCBHZXRBbGxQb3N0Y29kZXNMYW1iZGEoKSlcclxuICAgIGNvbnN0IERlbGV0ZVBvc3Rjb2Rlc0xhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJEZWxldGVQb3N0Y29kZXNcIiwgRGVsZXRlUG9zdGNvZGVzTGFtYmRhKCkpXHJcbiAgICBjb25zdCBDcmVhdGVXb3Jrc21hblNjaGVkdWxlTGFtYmRhQXBpID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCBcIkNyZWF0ZVdvcmtzbWFuU2NoZWR1bGVcIiwgQ3JlYXRlV29ya3NtYW5TY2hlZHVsZUxhbWJkYSgpKVxyXG4gICAgY29uc3QgRGVsZXRlV29ya21hblNjaGVkdWxlTGFtYmRhQXBpID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCBcIkRlbGV0ZVdvcmttYW5TY2hlZHVsZVwiLCBEZWxldGVXb3JrbWFuU2NoZWR1bGVMYW1iZGEoKSlcclxuICAgIGNvbnN0IEdldFdvcmtzbWFuU2NoZWR1bGVMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsIFwiR2V0V29ya3NtYW5TY2hlZHVsZVwiLCBHZXRXb3Jrc21hblNjaGVkdWxlc0xhbWJkYSgpKVxyXG4gICAgY29uc3QgR2V0V29ya3NtYW5qb2JzTGFtYmRhQXBpID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCBcIkdldFdvcmtzbWFuam9ic1wiLCBHZXRXb3Jrc21hbmpvYnNMYW1iZGEoKSlcclxuICAgIGNvbnN0IFdvcmtzbWFuam9ic0NyZWF0ZUxhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJXb3Jrc21hbmpvYnNDcmVhdGVcIiwgV29ya3NtYW5qb2JzQ3JlYXRlTGFtYmRhKCkpXHJcbiAgICBjb25zdCBDcmVhdGVCYW5rRGV0YWlsc0xhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJDcmVhdGVCYW5rRGV0YWlsc1wiLCBDcmVhdGVCYW5rRGV0YWlsc0xhbWJkYSgpKVxyXG4gICAgY29uc3QgR2V0QmFua0RldGFpbHNMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsIFwiR2V0QmFua0RldGFpbHNcIiwgR2V0QmFua0RldGFpbHNMYW1iZGEoKSlcclxuICAgIGNvbnN0IENyZWF0ZU1lc3NhZ2VzTGFtYmRhQXBpID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCBcIkNyZWF0ZU1lc3NhZ2VzXCIsIENyZWF0ZU1lc3NhZ2VzTGFtYmRhKCkpXHJcbiAgICBjb25zdCBHZXRNZXNzYWdlc0xhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJHZXRNZXNzYWdlc1wiLCBHZXRNZXNzYWdlc0xhbWJkYSgpKVxyXG4gICAgY29uc3QgQ3JlYXRlQ3VzdG9tZXJUYWJsZUxhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJDcmVhdGVDdXN0b21lclRhYmxlXCIsIENyZWF0ZUN1c3RvbWVyVGFibGVMYW1iZGEoKSlcclxuICAgIGNvbnN0IENyZWF0ZUN1c3RvbWVyQWRkcmVzc0xhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJDcmVhdGVDdXN0b21lckFkZHJlc3NcIiwgQ3JlYXRlQ3VzdG9tZXJBZGRyZXNzTGFtYmRhKCkpXHJcbiAgICBjb25zdCBHZXRKb2JzTGFtYmRhQXBpID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCBcIkdldEpvYnNcIiwgR2V0Sm9ic0xhbWJkYSgpKVxyXG4gICAgY29uc3QgR2V0TGlzdE9mSm9ic0Jhc2VkT25Nb250aExhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJHZXRMaXN0T2ZKb2JzQmFzZWRPbk1vbnRoXCIsIEdldExpc3RPZkpvYnNCYXNlZE9uTW9udGhMYW1iZGEoKSlcclxuICAgIGNvbnN0IEdldFBheW1lbnREZXRhaWxzTGFtYmRhQXBpID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCBcIkdldFBheW1lbnREZXRhaWxzXCIsIEdldFBheW1lbnREZXRhaWxzTGFtYmRhKCkpXHJcbiAgICBjb25zdCBDcmVhdGVQYXltZW50SGlzdG9yeURldGFpbHNMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsIFwiQ3JlYXRlUGF5bWVudEhpc3RvcnlEZXRhaWxzXCIsIENyZWF0ZVBheW1lbnRIaXN0b3J5RGV0YWlsc0xhbWJkYSgpKVxyXG4gICAgY29uc3QgR2V0UGF5bWVudEhpc3RvcnlEZXRhaWxzTGFtYmRhQXBpID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCBcIkdldFBheW1lbnRIaXN0b3J5RGV0YWlsc1wiLCBHZXRQYXltZW50SGlzdG9yeURldGFpbHNMYW1iZGEoKSlcclxuICAgIGNvbnN0IEdldERpc3RyaWN0V2lzZVBvc3RDb2Rlc0xhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJHZXREaXN0cmljdFdpc2VQb3N0Q29kZXNcIiwgR2V0RGlzdHJpY3RXaXNlUG9zdENvZGVzTGFtYmRhKCkpXHJcbiAgICBjb25zdCBVcGRhdGVCYW5rRGV0YWlsc0xhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJVcGRhdGVCYW5rRGV0YWlsc1wiLCBVcGRhdGVCYW5rRGV0YWlsc0xhbWJkYSgpKVxyXG5cclxuXHJcbiAgICBjb25zdCBhcGkgPSBuZXcgYXBpZ2F0ZXdheS5SZXN0QXBpKHRoaXMsICdXb3Jrc21hbkFwaURhdGEnLCBBcGlnYXRld2F5RGF0YUNvbnN0YW50cyhhcGlnYXRld2F5KSk7XHJcblxyXG4gICAgY29uc3QgdXNlclBvb2wgPSBuZXcgY29nbml0by5Vc2VyUG9vbCh0aGlzLCAndXNlcnBvb2wnLCB7XHJcbiAgICAgIHVzZXJQb29sTmFtZTogYHZrLWNsZWFuLXBvcnRhbGAsXHJcbiAgICAgIHJlbW92YWxQb2xpY3k6IGNkay5SZW1vdmFsUG9saWN5LkRFU1RST1ksXHJcbiAgICAgIHNlbGZTaWduVXBFbmFibGVkOiB0cnVlLFxyXG4gICAgICBzaWduSW5BbGlhc2VzOiB7IGVtYWlsOiB0cnVlLCBwaG9uZTogdHJ1ZSB9LFxyXG4gICAgICBhdXRvVmVyaWZ5OiB7IGVtYWlsOiB0cnVlIH0sXHJcbiAgICAgIHBhc3N3b3JkUG9saWN5OiB7XHJcbiAgICAgICAgbWluTGVuZ3RoOiA2LFxyXG4gICAgICAgIHJlcXVpcmVMb3dlcmNhc2U6IHRydWUsXHJcbiAgICAgICAgcmVxdWlyZURpZ2l0czogdHJ1ZSxcclxuICAgICAgICByZXF1aXJlVXBwZXJjYXNlOiB0cnVlLFxyXG4gICAgICAgIHJlcXVpcmVTeW1ib2xzOiB0cnVlLFxyXG4gICAgICB9LFxyXG4gICAgICBzdGFuZGFyZEF0dHJpYnV0ZXM6IHtcclxuICAgICAgICBnaXZlbk5hbWU6IHtcclxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgbXV0YWJsZTogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZmFtaWx5TmFtZToge1xyXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICBtdXRhYmxlOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbWFpbDoge1xyXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICBtdXRhYmxlOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhZGRyZXNzOiB7XHJcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgIG11dGFibGU6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJpcnRoZGF0ZToge1xyXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICBtdXRhYmxlOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZW5kZXI6IHtcclxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgbXV0YWJsZTogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbG9jYWxlOiB7XHJcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgIG11dGFibGU6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBob25lTnVtYmVyOiB7XHJcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgIG11dGFibGU6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBhY2NvdW50UmVjb3Zlcnk6IGNvZ25pdG8uQWNjb3VudFJlY292ZXJ5LkVNQUlMX09OTFksXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgY29uc3Qgc3RhbmRhcmRDb2duaXRvQXR0cmlidXRlcyA9IHtcclxuICAgICAgZ2l2ZW5OYW1lOiB0cnVlLFxyXG4gICAgICBmYW1pbHlOYW1lOiB0cnVlLFxyXG4gICAgICBlbWFpbDogdHJ1ZSxcclxuICAgICAgYWRkcmVzczogdHJ1ZSxcclxuICAgICAgYmlydGhkYXRlOiB0cnVlLFxyXG4gICAgICBnZW5kZXI6IHRydWUsXHJcbiAgICAgIGxvY2FsZTogdHJ1ZSxcclxuICAgICAgcGhvbmVOdW1iZXI6IHRydWUsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGNsaWVudFJlYWRBdHRyaWJ1dGVzID0gbmV3IGNvZ25pdG8uQ2xpZW50QXR0cmlidXRlcygpXHJcbiAgICAgIC53aXRoU3RhbmRhcmRBdHRyaWJ1dGVzKHN0YW5kYXJkQ29nbml0b0F0dHJpYnV0ZXMpXHJcblxyXG4gICAgY29uc3QgY2xpZW50V3JpdGVBdHRyaWJ1dGVzID0gbmV3IGNvZ25pdG8uQ2xpZW50QXR0cmlidXRlcygpXHJcbiAgICAgIC53aXRoU3RhbmRhcmRBdHRyaWJ1dGVzKHtcclxuICAgICAgICAuLi5zdGFuZGFyZENvZ25pdG9BdHRyaWJ1dGVzLFxyXG4gICAgICAgIGVtYWlsVmVyaWZpZWQ6IGZhbHNlLFxyXG4gICAgICAgIHBob25lTnVtYmVyVmVyaWZpZWQ6IGZhbHNlLFxyXG4gICAgICB9KVxyXG5cclxuXHJcblxyXG4gICAgY29uc3QgdXNlclBvb2xDbGllbnQgPSBuZXcgY29nbml0by5Vc2VyUG9vbENsaWVudCh0aGlzLCAndXNlcnBvb2wtY2xpZW50Jywge1xyXG4gICAgICB1c2VyUG9vbCxcclxuICAgICAgYXV0aEZsb3dzOiB7XHJcbiAgICAgICAgYWRtaW5Vc2VyUGFzc3dvcmQ6IHRydWUsXHJcbiAgICAgICAgY3VzdG9tOiB0cnVlLFxyXG4gICAgICAgIHVzZXJTcnA6IHRydWUsXHJcbiAgICAgICAgdXNlclBhc3N3b3JkOiB0cnVlXHJcbiAgICAgIH0sXHJcbiAgICAgIHN1cHBvcnRlZElkZW50aXR5UHJvdmlkZXJzOiBbXHJcbiAgICAgICAgY29nbml0by5Vc2VyUG9vbENsaWVudElkZW50aXR5UHJvdmlkZXIuQ09HTklUTyxcclxuICAgICAgXSxcclxuICAgICAgcmVhZEF0dHJpYnV0ZXM6IGNsaWVudFJlYWRBdHRyaWJ1dGVzLFxyXG4gICAgICB3cml0ZUF0dHJpYnV0ZXM6IGNsaWVudFdyaXRlQXR0cmlidXRlcyxcclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgbmV3IGNkay5DZm5PdXRwdXQodGhpcywgJ3JlZ2lvbicsIHsgdmFsdWU6IGNkay5TdGFjay5vZih0aGlzKS5yZWdpb24gfSk7XHJcbiAgICBuZXcgY2RrLkNmbk91dHB1dCh0aGlzLCAndXNlclBvb2xJZCcsIHsgdmFsdWU6IHVzZXJQb29sLnVzZXJQb29sSWQgfSk7XHJcbiAgICBuZXcgY2RrLkNmbk91dHB1dCh0aGlzLCAndXNlclBvb2xDbGllbnRJZCcsIHtcclxuICAgICAgdmFsdWU6IHVzZXJQb29sQ2xpZW50LnVzZXJQb29sQ2xpZW50SWQsXHJcbiAgICB9KTtcclxuXHJcbiAgICBuZXcgY2RrLkNmbk91dHB1dCh0aGlzLCAnYXBpVXJsJywgeyB2YWx1ZTogYXBpLnVybCB9KTtcclxuXHJcblxyXG5cclxuICAgIGNvbnN0IGF1dGggPSBuZXcgYXBpZ2F0ZXdheS5Db2duaXRvVXNlclBvb2xzQXV0aG9yaXplcih0aGlzLCAnQXV0aG9yaXplcicsIHtcclxuICAgICAgY29nbml0b1VzZXJQb29sczogW3VzZXJQb29sXVxyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAvLyBQT1NUIEFQSVNcclxuICAgIFdvcmtzbWFuVGVybXNBbmRDb25kaXRpb25zQXBpR2F0ZXdheShhcGksIFdvcmtzTWFuVGVybXNBbmRDb25kaXRpb24sICdQT1NUJywgYXV0aClcclxuICAgIHdvcmtzbWFuRXhwZXJpZW5jZUFwaUdhdGV3YXkoYXBpLCBXb3Jrc01hbkV4cGVyaWVuY2UsICdQT1NUJywgYXV0aClcclxuICAgIC8vIFBvc3RVc2VyQXBpR2F0ZXdheShhcGksIFBvc3RUZXN0VXNlciwgJ1BPU1QnLCBhdXRoKVxyXG4gICAgY3JlYXRlUG9zdGNvZGVzQXBpR2F0ZXdheShhcGksIFVzZXJQb3N0Q29kZUxhbWJkYUFwaSwgJ1BPU1QnLCBhdXRoKVxyXG4gICAgQ3JlYXRlV29ya3NtYW5TY2hlZHVsZUFwaUdhdGV3YXkoYXBpLCBDcmVhdGVXb3Jrc21hblNjaGVkdWxlTGFtYmRhQXBpLCAnUE9TVCcsIGF1dGgpXHJcbiAgICBXb3Jrc21hbmpvYnNDcmVhdGVBcGlHYXRld2F5KGFwaSwgV29ya3NtYW5qb2JzQ3JlYXRlTGFtYmRhQXBpLCAnUE9TVCcsIGF1dGgpXHJcbiAgICBDcmVhdGVCYW5rRGV0YWlsc0FwaUdhdGV3YXkoYXBpLCBDcmVhdGVCYW5rRGV0YWlsc0xhbWJkYUFwaSwgJ1BPU1QnLCBhdXRoKVxyXG4gICAgQ3JlYXRlTWVzc2FnZXNBcGlHYXRld2F5KGFwaSwgQ3JlYXRlTWVzc2FnZXNMYW1iZGFBcGksICdQT1NUJywgYXV0aClcclxuICAgIC8vIENyZWF0ZUN1c3RvbWVyVGFibGVBcGlHYXRld2F5KGFwaSwgQ3JlYXRlQ3VzdG9tZXJUYWJsZUxhbWJkYUFwaSwgJ1BPU1QnLCBhdXRoKVxyXG4gICAgLy8gQ3JlYXRlQ3VzdG9tZXJBZGRyZXNzQXBpR2F0ZXdheShhcGksIENyZWF0ZUN1c3RvbWVyVGFibGVMYW1iZGFBcGksICdQT1NUJywgYXV0aClcclxuICAgIC8vIC8vIENyZWF0ZVBheW1lbnRIaXN0b3J5RGV0YWlsc0FwaUdhdGV3YXkoYXBpLCBDcmVhdGVDdXN0b21lclRhYmxlTGFtYmRhQXBpLCAnUE9TVCcsIGF1dGgpXHJcblxyXG4gICAgLy8gLy8gR0VUIEFQSVNcclxuICAgIEdldFdvcmtzbWFuQWNjb3VudFJlZ2lzdGFydGlvblN0YXR1c0FwaUdhdGV3YXkoYXBpLCBHZXRXb3Jrc21hbkFjY291bnRSZWdpc3RhcnRpb25TdGF0dXMsICdHRVQnLCBhdXRoKVxyXG4gICAgLy8gR2V0VGVzdFVzZXJBcGlHYXRld2F5KGFwaSwgR2V0VGVzdFVzZXIsICdHRVQnLCBhdXRoKVxyXG4gICAgZ2V0QWxsTW9iaWxlTnVtYmVyc0FwaUdhdGV3YXkoYXBpLCBnZXRBbGxNb2JpbGVOdW1iZXJzRGVtbywgJ0dFVCcpXHJcbiAgICBHZXRXb3JrbWFuRGV0YWlsc0FwaUdhdGV3YXkoYXBpLCBHZXRXb3JrbWFuRGV0YWlsTGFtYmRhLCAnR0VUJywgYXV0aClcclxuICAgIEdldEFsbFBvc3Rjb2Rlc0FwaUdhdGV3YXkoYXBpLCBHZXRBbGxQb3N0Y29kZXNMYW1iZGFBcGksICdHRVQnLCBhdXRoKVxyXG4gICAgR2V0V29ya3NtYW5TY2hlZHVsZUFwaUdhdGV3YXkoYXBpLCBHZXRXb3Jrc21hblNjaGVkdWxlTGFtYmRhQXBpLCAnR0VUJywgYXV0aClcclxuICAgIEdldFdvcmtzbWFuam9ic0FwaUdhdGV3YXkoYXBpLCBHZXRXb3Jrc21hbmpvYnNMYW1iZGFBcGksICdHRVQnLCBhdXRoKVxyXG4gICAgR2V0QmFua0RldGFpbHNBcGlHYXRld2F5KGFwaSwgR2V0QmFua0RldGFpbHNMYW1iZGFBcGksICdHRVQnLCBhdXRoKVxyXG4gICAgR2V0TWVzc2FnZXNBcGlHYXRld2F5KGFwaSwgR2V0TWVzc2FnZXNMYW1iZGFBcGksICdHRVQnLCBhdXRoKVxyXG4gICAgR2V0Sm9ic0FwaUdhdGV3YXkoYXBpLCBHZXRKb2JzTGFtYmRhQXBpLCAnR0VUJywgYXV0aClcclxuICAgIEdldExpc3RPZkpvYnNCYXNlZE9uTW9udGhBcGlHYXRld2F5KGFwaSwgR2V0TGlzdE9mSm9ic0Jhc2VkT25Nb250aExhbWJkYUFwaSwgJ0dFVCcsIGF1dGgpXHJcbiAgICBHZXRQYXltZW50RGV0YWlsc0FwaUdhdGV3YXkoYXBpLCBHZXRQYXltZW50RGV0YWlsc0xhbWJkYUFwaSwgJ0dFVCcsIGF1dGgpXHJcbiAgICBHZXRQYXltZW50SGlzdG9yeURldGFpbHNBcGlHYXRld2F5KGFwaSwgR2V0UGF5bWVudEhpc3RvcnlEZXRhaWxzTGFtYmRhQXBpLCAnR0VUJywgYXV0aClcclxuICAgIEdldERpc3RyaWN0V2lzZVBvc3RDb2Rlc0FwaUdhdGV3YXkoYXBpLCBHZXREaXN0cmljdFdpc2VQb3N0Q29kZXNMYW1iZGFBcGksICdHRVQnLCBhdXRoKVxyXG5cclxuICAgIC8vIC8vIERFTEVURSBBUElTXHJcbiAgICBEZWxldGVQb3N0Y29kZXNBcGlHYXRld2F5KGFwaSwgRGVsZXRlUG9zdGNvZGVzTGFtYmRhQXBpLCAnREVMRVRFJywgYXV0aClcclxuICAgIERlbGV0ZVdvcmttYW5TY2hlZHVsZUFwaUdhdGV3YXkoYXBpLCBEZWxldGVXb3JrbWFuU2NoZWR1bGVMYW1iZGFBcGksICdERUxFVEUnLCBhdXRoKVxyXG5cclxuICAgIC8vIC8vIFVQREFURSBBUElTXHJcbiAgICBVcGRhdGVXb3Jrc21hbkRldGFpbHNBcGlHYXRld2F5KGFwaSwgVXBkYXRlV29ya3NtYW5EZXRhaWxMYW1iZGEsICdQVVQnLCBhdXRoKVxyXG4gICAgVXBkYXRlQmFua0RldGFpbHNBcGlHYXRld2F5KGFwaSwgVXBkYXRlQmFua0RldGFpbHNMYW1iZGFBcGksICdQVVQnLCBhdXRoKVxyXG5cclxuICB9XHJcbn0iXX0=