"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CdkExampleStack = void 0;
const cdk = require("@aws-cdk/core");
const lambda = require("@aws-cdk/aws-lambda");
const allLambda_1 = require("./resources/lambda/allLambda");
const apigateway = require("@aws-cdk/aws-apigateway");
const ApiGatewayConstant_1 = require("../constants/ApiGatewayConstant");
const AllApiGateWays_1 = require("./resources/ApiGateway/AllApiGateWays");
const cognito = require("@aws-cdk/aws-cognito");
class CdkExampleStack extends cdk.Stack {
    constructor(scope, id, props) {
        super(scope, id, props);
        const userRegistration = new lambda.Function(this, 'UserRegistration', allLambda_1.UserRegistrationLambda());
        const WorksManTermsAndCondition = new lambda.Function(this, 'WorksManTermsAndCondition', allLambda_1.WorksManTermsAndConditionLambda());
        const WorksManExperience = new lambda.Function(this, 'WorksManExperience', allLambda_1.WorksManExperienceLambda());
        const GetWorksmanAccountRegistartionStatus = new lambda.Function(this, "GetWorksmanAccountRegistartionStatus", allLambda_1.GetWorksmanAccountRegistartionStatusLambda());
        const GetTestUser = new lambda.Function(this, "GetTestUser", allLambda_1.GetTestUserLambda());
        const PostTestUser = new lambda.Function(this, "PostTestUser", allLambda_1.PostTestUserLambda());
        const getAllMobileNumbersDemo = new lambda.Function(this, "getAllMobileNumber", allLambda_1.getAllMobileNumberLambda());
        const GetWorkmanDetailLambda = new lambda.Function(this, "GetWorkmanDetails", allLambda_1.GetWorkmanDetailsLambda());
        const UpdateWorksmanDetailLambda = new lambda.Function(this, "UpdateWorksmanDetail", allLambda_1.UpdateWorksmanDetailsLambda());
        const UserPostCodeLambdaApi = new lambda.Function(this, "UserPostCodes", allLambda_1.UserPostCodesLambda());
        const GetAllPostcodesLambdaApi = new lambda.Function(this, "GetAllPostcodes", allLambda_1.GetAllPostcodesLambda());
        const DeletePostcodesLambdaApi = new lambda.Function(this, "DeletePostcodes", allLambda_1.DeletePostcodesLambda());
        const WorksmnaScheduleLambdaApi = new lambda.Function(this, "WorksmnaScheduletcodes", allLambda_1.WorksmnaScheduleLambda());
        const DeleteWorkmanScheduleLambdaApi = new lambda.Function(this, "DeleteWorkmanSchedule", allLambda_1.DeleteWorkmanScheduleLambda());
        const GetWorksmanScheduleLambdaApi = new lambda.Function(this, "GetWorksmanSchedule", allLambda_1.GetWorksmanSchedulesLambda());
        const GetWorksmanjobsLambdaApi = new lambda.Function(this, "GetWorksmanjobs", allLambda_1.GetWorksmanjobsLambda());
        const WorksmanjobsCreateLambdaApi = new lambda.Function(this, "WorksmanjobsCreate", allLambda_1.WorksmanjobsCreateLambda());
        const CreateBankDetailsLambdaApi = new lambda.Function(this, "CreateBankDetails", allLambda_1.CreateBankDetailsLambda());
        const GetBankDetailsLambdaApi = new lambda.Function(this, "GetBankDetails", allLambda_1.GetBankDetailsLambda());
        const CreateMessagesLambdaApi = new lambda.Function(this, "CreateMessages", allLambda_1.CreateMessagesLambda());
        const GetMessagesLambdaApi = new lambda.Function(this, "GetMessages", allLambda_1.GetMessagesLambda());
        const CreateCustomerTableLambdaApi = new lambda.Function(this, "CreateCustomerTable", allLambda_1.CreateCustomerTableLambda());
        const api = new apigateway.RestApi(this, 'WorksManApiDefault', ApiGatewayConstant_1.ApigatewayDataConstants(apigateway));
        const userPool = new cognito.UserPool(this, 'userpool', {
            userPoolName: `vk-clean-portal`,
            removalPolicy: cdk.RemovalPolicy.DESTROY,
            selfSignUpEnabled: true,
            signInAliases: { email: true, phone: true },
            autoVerify: { email: true },
            passwordPolicy: {
                minLength: 6,
                requireLowercase: true,
                requireDigits: true,
                requireUppercase: true,
                requireSymbols: true,
            },
            standardAttributes: {
                givenName: {
                    required: true,
                    mutable: true
                },
                familyName: {
                    required: true,
                    mutable: true
                },
                email: {
                    required: true,
                    mutable: true
                },
                address: {
                    required: true,
                    mutable: true
                },
                birthdate: {
                    required: true,
                    mutable: true
                },
                gender: {
                    required: true,
                    mutable: true
                },
                locale: {
                    required: true,
                    mutable: true
                },
                phoneNumber: {
                    required: true,
                    mutable: true
                },
            },
            accountRecovery: cognito.AccountRecovery.EMAIL_ONLY,
        });
        const standardCognitoAttributes = {
            givenName: true,
            familyName: true,
            email: true,
            address: true,
            birthdate: true,
            gender: true,
            locale: true,
            phoneNumber: true,
        };
        const clientReadAttributes = new cognito.ClientAttributes()
            .withStandardAttributes(standardCognitoAttributes);
        const clientWriteAttributes = new cognito.ClientAttributes()
            .withStandardAttributes({
            ...standardCognitoAttributes,
            emailVerified: false,
            phoneNumberVerified: false,
        });
        const userPoolClient = new cognito.UserPoolClient(this, 'userpool-client', {
            userPool,
            authFlows: {
                adminUserPassword: true,
                custom: true,
                userSrp: true,
                userPassword: true
            },
            supportedIdentityProviders: [
                cognito.UserPoolClientIdentityProvider.COGNITO,
            ],
            readAttributes: clientReadAttributes,
            writeAttributes: clientWriteAttributes,
        });
        new cdk.CfnOutput(this, 'region', { value: cdk.Stack.of(this).region });
        new cdk.CfnOutput(this, 'userPoolId', { value: userPool.userPoolId });
        new cdk.CfnOutput(this, 'userPoolClientId', {
            value: userPoolClient.userPoolClientId,
        });
        new cdk.CfnOutput(this, 'apiUrl', { value: api.url });
        const auth = new apigateway.CognitoUserPoolsAuthorizer(this, 'Authorizer', {
            cognitoUserPools: [userPool]
        });
        // POST APIS
        AllApiGateWays_1.WorksmanTermsAndConditionsApiGateway(api, WorksManTermsAndCondition, 'POST', auth);
        AllApiGateWays_1.worksmanExperienceApiGateway(api, WorksManExperience, 'POST', auth);
        AllApiGateWays_1.PostUserApiGateway(api, PostTestUser, 'POST', auth);
        AllApiGateWays_1.UserPostCodesApiGateway(api, UserPostCodeLambdaApi, 'POST', auth);
        AllApiGateWays_1.WorksmnaScheduleApiGateway(api, WorksmnaScheduleLambdaApi, 'POST', auth);
        AllApiGateWays_1.WorksmanjobsCreateApiGateway(api, WorksmanjobsCreateLambdaApi, 'POST', auth);
        AllApiGateWays_1.CreateBankDetailsApiGateway(api, CreateBankDetailsLambdaApi, 'POST', auth);
        AllApiGateWays_1.CreateMessagesApiGateway(api, CreateMessagesLambdaApi, 'POST', auth);
        AllApiGateWays_1.CreateCustomerTableApiGateway(api, CreateCustomerTableLambdaApi, 'POST', auth);
        // GET APIS
        AllApiGateWays_1.GetWorksmanAccountRegistartionStatusApiGateway(api, GetWorksmanAccountRegistartionStatus, 'GET', auth);
        AllApiGateWays_1.GetTestUserApiGateway(api, GetTestUser, 'GET', auth);
        AllApiGateWays_1.getAllMobileNumbersApiGateway(api, getAllMobileNumbersDemo, 'GET');
        AllApiGateWays_1.GetWorkmanDetailsApiGateway(api, GetWorkmanDetailLambda, 'GET', auth);
        AllApiGateWays_1.GetAllPostcodesApiGateway(api, GetAllPostcodesLambdaApi, 'GET', auth);
        AllApiGateWays_1.GetWorksmanScheduleApiGateway(api, GetWorksmanScheduleLambdaApi, 'GET', auth);
        AllApiGateWays_1.GetWorksmanjobsApiGateway(api, GetWorksmanjobsLambdaApi, 'GET', auth);
        AllApiGateWays_1.GetBankDetailsApiGateway(api, GetBankDetailsLambdaApi, 'GET', auth);
        AllApiGateWays_1.GetMessagesApiGateway(api, GetMessagesLambdaApi, 'GET', auth);
        // DELETE APIS
        AllApiGateWays_1.DeletePostcodesApiGateway(api, DeletePostcodesLambdaApi, 'DELETE', auth);
        AllApiGateWays_1.DeleteWorkmanScheduleApiGateway(api, DeleteWorkmanScheduleLambdaApi, 'DELETE', auth);
        // UPDATE APIS
        AllApiGateWays_1.UpdateWorksmanDetailsApiGateway(api, UpdateWorksmanDetailLambda, 'PUT', auth);
    }
}
exports.CdkExampleStack = CdkExampleStack;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2RrLWV4YW1wbGUtc3RhY2suanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjZGstZXhhbXBsZS1zdGFjay50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxxQ0FBcUM7QUFDckMsOENBQThDO0FBQzlDLDREQWtCc0M7QUFHdEMsc0RBQXFEO0FBQ3JELHdFQUEwRTtBQUMxRSwwRUFrQitDO0FBRy9DLGdEQUFnRDtBQUVoRCxNQUFhLGVBQWdCLFNBQVEsR0FBRyxDQUFDLEtBQUs7SUFFNUMsWUFBWSxLQUFvQixFQUFFLEVBQVUsRUFBRSxLQUFzQjtRQUNsRSxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUV4QixNQUFNLGdCQUFnQixHQUFHLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCLEVBQUUsa0NBQXNCLEVBQUUsQ0FBQyxDQUFBO1FBQ2hHLE1BQU0seUJBQXlCLEdBQUcsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSwyQkFBMkIsRUFBRSwyQ0FBK0IsRUFBRSxDQUFDLENBQUE7UUFDM0gsTUFBTSxrQkFBa0IsR0FBRyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLG9CQUFvQixFQUFFLG9DQUF3QixFQUFFLENBQUMsQ0FBQTtRQUN0RyxNQUFNLG9DQUFvQyxHQUFHLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsc0NBQXNDLEVBQUUsc0RBQTBDLEVBQUUsQ0FBQyxDQUFBO1FBQzVKLE1BQU0sV0FBVyxHQUFHLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsYUFBYSxFQUFFLDZCQUFpQixFQUFFLENBQUMsQ0FBQTtRQUNqRixNQUFNLFlBQVksR0FBRyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLGNBQWMsRUFBRSw4QkFBa0IsRUFBRSxDQUFDLENBQUE7UUFDcEYsTUFBTSx1QkFBdUIsR0FBRyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLG9CQUFvQixFQUFFLG9DQUF3QixFQUFFLENBQUMsQ0FBQTtRQUMzRyxNQUFNLHNCQUFzQixHQUFHLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CLEVBQUUsbUNBQXVCLEVBQUUsQ0FBQyxDQUFBO1FBQ3hHLE1BQU0sMEJBQTBCLEdBQUcsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxzQkFBc0IsRUFBRSx1Q0FBMkIsRUFBRSxDQUFDLENBQUE7UUFDbkgsTUFBTSxxQkFBcUIsR0FBRyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLGVBQWUsRUFBRSwrQkFBbUIsRUFBRSxDQUFDLENBQUE7UUFDL0YsTUFBTSx3QkFBd0IsR0FBRyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLGlCQUFpQixFQUFFLGlDQUFxQixFQUFFLENBQUMsQ0FBQTtRQUN0RyxNQUFNLHdCQUF3QixHQUFHLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsaUJBQWlCLEVBQUUsaUNBQXFCLEVBQUUsQ0FBQyxDQUFBO1FBQ3RHLE1BQU0seUJBQXlCLEdBQUcsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSx3QkFBd0IsRUFBRSxrQ0FBc0IsRUFBRSxDQUFDLENBQUE7UUFDL0csTUFBTSw4QkFBOEIsR0FBRyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLHVCQUF1QixFQUFFLHVDQUEyQixFQUFFLENBQUMsQ0FBQTtRQUN4SCxNQUFNLDRCQUE0QixHQUFHLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUscUJBQXFCLEVBQUUsc0NBQTBCLEVBQUUsQ0FBQyxDQUFBO1FBQ25ILE1BQU0sd0JBQXdCLEdBQUcsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxpQkFBaUIsRUFBRSxpQ0FBcUIsRUFBRSxDQUFDLENBQUE7UUFDdEcsTUFBTSwyQkFBMkIsR0FBRyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLG9CQUFvQixFQUFFLG9DQUF3QixFQUFFLENBQUMsQ0FBQTtRQUMvRyxNQUFNLDBCQUEwQixHQUFHLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CLEVBQUUsbUNBQXVCLEVBQUUsQ0FBQyxDQUFBO1FBQzVHLE1BQU0sdUJBQXVCLEdBQUcsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxnQkFBZ0IsRUFBRSxnQ0FBb0IsRUFBRSxDQUFDLENBQUE7UUFDbkcsTUFBTSx1QkFBdUIsR0FBRyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLGdCQUFnQixFQUFFLGdDQUFvQixFQUFFLENBQUMsQ0FBQTtRQUNuRyxNQUFNLG9CQUFvQixHQUFHLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsYUFBYSxFQUFFLDZCQUFpQixFQUFFLENBQUMsQ0FBQTtRQUMxRixNQUFNLDRCQUE0QixHQUFHLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUscUJBQXFCLEVBQUUscUNBQXlCLEVBQUUsQ0FBQyxDQUFBO1FBRWxILE1BQU0sR0FBRyxHQUFHLElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsb0JBQW9CLEVBQUUsNENBQXVCLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztRQUVwRyxNQUFNLFFBQVEsR0FBRyxJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRTtZQUN0RCxZQUFZLEVBQUUsaUJBQWlCO1lBQy9CLGFBQWEsRUFBRSxHQUFHLENBQUMsYUFBYSxDQUFDLE9BQU87WUFDeEMsaUJBQWlCLEVBQUUsSUFBSTtZQUN2QixhQUFhLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUU7WUFDM0MsVUFBVSxFQUFFLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRTtZQUMzQixjQUFjLEVBQUU7Z0JBQ2QsU0FBUyxFQUFFLENBQUM7Z0JBQ1osZ0JBQWdCLEVBQUUsSUFBSTtnQkFDdEIsYUFBYSxFQUFFLElBQUk7Z0JBQ25CLGdCQUFnQixFQUFFLElBQUk7Z0JBQ3RCLGNBQWMsRUFBRSxJQUFJO2FBQ3JCO1lBQ0Ysa0JBQWtCLEVBQUM7Z0JBQ2xCLFNBQVMsRUFBRTtvQkFDVCxRQUFRLEVBQUMsSUFBSTtvQkFDYixPQUFPLEVBQUMsSUFBSTtpQkFDYjtnQkFDRCxVQUFVLEVBQUU7b0JBQ1YsUUFBUSxFQUFDLElBQUk7b0JBQ2IsT0FBTyxFQUFDLElBQUk7aUJBQ2I7Z0JBQ0QsS0FBSyxFQUFFO29CQUNMLFFBQVEsRUFBQyxJQUFJO29CQUNiLE9BQU8sRUFBQyxJQUFJO2lCQUNiO2dCQUNELE9BQU8sRUFBRTtvQkFDUCxRQUFRLEVBQUMsSUFBSTtvQkFDYixPQUFPLEVBQUMsSUFBSTtpQkFDYjtnQkFDRCxTQUFTLEVBQUU7b0JBQ1QsUUFBUSxFQUFDLElBQUk7b0JBQ2IsT0FBTyxFQUFDLElBQUk7aUJBQ2I7Z0JBQ0QsTUFBTSxFQUFFO29CQUNOLFFBQVEsRUFBQyxJQUFJO29CQUNiLE9BQU8sRUFBQyxJQUFJO2lCQUNiO2dCQUNELE1BQU0sRUFBRTtvQkFDTixRQUFRLEVBQUMsSUFBSTtvQkFDYixPQUFPLEVBQUMsSUFBSTtpQkFDYjtnQkFDRCxXQUFXLEVBQUU7b0JBQ1gsUUFBUSxFQUFDLElBQUk7b0JBQ2IsT0FBTyxFQUFDLElBQUk7aUJBQ2I7YUFDRDtZQUNBLGVBQWUsRUFBRSxPQUFPLENBQUMsZUFBZSxDQUFDLFVBQVU7U0FDcEQsQ0FBQyxDQUFDO1FBR0gsTUFBTSx5QkFBeUIsR0FBRztZQUNoQyxTQUFTLEVBQUUsSUFBSTtZQUNmLFVBQVUsRUFBRSxJQUFJO1lBQ2hCLEtBQUssRUFBRSxJQUFJO1lBQ1gsT0FBTyxFQUFFLElBQUk7WUFDYixTQUFTLEVBQUUsSUFBSTtZQUNmLE1BQU0sRUFBRSxJQUFJO1lBQ1osTUFBTSxFQUFFLElBQUk7WUFDWixXQUFXLEVBQUUsSUFBSTtTQUNsQixDQUFDO1FBRUYsTUFBTSxvQkFBb0IsR0FBRyxJQUFJLE9BQU8sQ0FBQyxnQkFBZ0IsRUFBRTthQUN4RCxzQkFBc0IsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFBO1FBRXBELE1BQU0scUJBQXFCLEdBQUcsSUFBSSxPQUFPLENBQUMsZ0JBQWdCLEVBQUU7YUFDekQsc0JBQXNCLENBQUM7WUFDdEIsR0FBRyx5QkFBeUI7WUFDNUIsYUFBYSxFQUFFLEtBQUs7WUFDcEIsbUJBQW1CLEVBQUUsS0FBSztTQUMzQixDQUFDLENBQUE7UUFJRixNQUFNLGNBQWMsR0FBRyxJQUFJLE9BQU8sQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLGlCQUFpQixFQUFFO1lBQ3pFLFFBQVE7WUFDUixTQUFTLEVBQUU7Z0JBQ1QsaUJBQWlCLEVBQUUsSUFBSTtnQkFDdkIsTUFBTSxFQUFFLElBQUk7Z0JBQ1osT0FBTyxFQUFFLElBQUk7Z0JBQ2IsWUFBWSxFQUFDLElBQUk7YUFDbEI7WUFDRCwwQkFBMEIsRUFBRTtnQkFDMUIsT0FBTyxDQUFDLDhCQUE4QixDQUFDLE9BQU87YUFDL0M7WUFDRCxjQUFjLEVBQUUsb0JBQW9CO1lBQ3BDLGVBQWUsRUFBRSxxQkFBcUI7U0FDdkMsQ0FBQyxDQUFDO1FBSUwsSUFBSSxHQUFHLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztRQUN4RSxJQUFJLEdBQUcsQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLFlBQVksRUFBRSxFQUFFLEtBQUssRUFBRSxRQUFRLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQztRQUN0RSxJQUFJLEdBQUcsQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLGtCQUFrQixFQUFFO1lBQzFDLEtBQUssRUFBRSxjQUFjLENBQUMsZ0JBQWdCO1NBQ3ZDLENBQUMsQ0FBQztRQUVILElBQUksR0FBRyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1FBSXRELE1BQU0sSUFBSSxHQUFHLElBQUksVUFBVSxDQUFDLDBCQUEwQixDQUFDLElBQUksRUFBRSxZQUFZLEVBQUU7WUFDekUsZ0JBQWdCLEVBQUUsQ0FBQyxRQUFRLENBQUM7U0FDN0IsQ0FBQyxDQUFDO1FBSUgsWUFBWTtRQUNaLHFEQUFvQyxDQUFDLEdBQUcsRUFBRSx5QkFBeUIsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDbEYsNkNBQTRCLENBQUMsR0FBRyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUNuRSxtQ0FBa0IsQ0FBQyxHQUFHLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUNuRCx3Q0FBdUIsQ0FBQyxHQUFHLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQ2pFLDJDQUEwQixDQUFDLEdBQUcsRUFBRSx5QkFBeUIsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDeEUsNkNBQTRCLENBQUMsR0FBRyxFQUFFLDJCQUEyQixFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUM1RSw0Q0FBMkIsQ0FBQyxHQUFHLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQzFFLHlDQUF3QixDQUFDLEdBQUcsRUFBRSx1QkFBdUIsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDcEUsOENBQTZCLENBQUMsR0FBRyxFQUFFLDRCQUE0QixFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUU5RSxXQUFXO1FBQ1gsK0RBQThDLENBQUMsR0FBRyxFQUFFLG9DQUFvQyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUN0RyxzQ0FBcUIsQ0FBQyxHQUFHLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUNwRCw4Q0FBNkIsQ0FBQyxHQUFHLEVBQUUsdUJBQXVCLEVBQUUsS0FBSyxDQUFDLENBQUE7UUFDbEUsNENBQTJCLENBQUMsR0FBRyxFQUFFLHNCQUFzQixFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUNyRSwwQ0FBeUIsQ0FBQyxHQUFHLEVBQUUsd0JBQXdCLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQ3JFLDhDQUE2QixDQUFDLEdBQUcsRUFBRSw0QkFBNEIsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDN0UsMENBQXlCLENBQUMsR0FBRyxFQUFFLHdCQUF3QixFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUNyRSx5Q0FBd0IsQ0FBQyxHQUFHLEVBQUUsdUJBQXVCLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQ25FLHNDQUFxQixDQUFDLEdBQUcsRUFBRSxvQkFBb0IsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFFN0QsY0FBYztRQUNkLDBDQUF5QixDQUFDLEdBQUcsRUFBRSx3QkFBd0IsRUFBRSxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDeEUsZ0RBQStCLENBQUMsR0FBRyxFQUFFLDhCQUE4QixFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUVwRixjQUFjO1FBQ2QsZ0RBQStCLENBQUMsR0FBRyxFQUFFLDBCQUEwQixFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQTtJQUUvRSxDQUFDO0NBQ0Y7QUF2S0QsMENBdUtDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgY2RrIGZyb20gJ0Bhd3MtY2RrL2NvcmUnO1xyXG5pbXBvcnQgKiBhcyBsYW1iZGEgZnJvbSAnQGF3cy1jZGsvYXdzLWxhbWJkYSc7XHJcbmltcG9ydCB7XHJcbiAgVXNlclJlZ2lzdHJhdGlvbkxhbWJkYSwgV29ya3NNYW5UZXJtc0FuZENvbmRpdGlvbkxhbWJkYSwgV29ya3NNYW5FeHBlcmllbmNlTGFtYmRhLFxyXG4gIEdldFdvcmtzbWFuQWNjb3VudFJlZ2lzdGFydGlvblN0YXR1c0xhbWJkYSwgR2V0VGVzdFVzZXJMYW1iZGEsIFBvc3RUZXN0VXNlckxhbWJkYSwgZ2V0QWxsTW9iaWxlTnVtYmVyTGFtYmRhLFxyXG4gIEdldFdvcmttYW5EZXRhaWxzTGFtYmRhLFxyXG4gIFVwZGF0ZVdvcmtzbWFuRGV0YWlsc0xhbWJkYSxcclxuICBVc2VyUG9zdENvZGVzTGFtYmRhLFxyXG4gIEdldEFsbFBvc3Rjb2Rlc0xhbWJkYSxcclxuICBEZWxldGVQb3N0Y29kZXNMYW1iZGEsXHJcbiAgV29ya3NtbmFTY2hlZHVsZUxhbWJkYSxcclxuICBEZWxldGVXb3JrbWFuU2NoZWR1bGVMYW1iZGEsXHJcbiAgR2V0V29ya3NtYW5TY2hlZHVsZXNMYW1iZGEsXHJcbiAgR2V0V29ya3NtYW5qb2JzTGFtYmRhLFxyXG4gIFdvcmtzbWFuam9ic0NyZWF0ZUxhbWJkYSxcclxuICBHZXRNZXNzYWdlc0xhbWJkYSxcclxuICBDcmVhdGVNZXNzYWdlc0xhbWJkYSxcclxuICBDcmVhdGVCYW5rRGV0YWlsc0xhbWJkYSxcclxuICBHZXRCYW5rRGV0YWlsc0xhbWJkYSxcclxuICBDcmVhdGVDdXN0b21lclRhYmxlTGFtYmRhXHJcbn0gZnJvbSAnLi9yZXNvdXJjZXMvbGFtYmRhL2FsbExhbWJkYSc7XHJcbmltcG9ydCAqIGFzIHNmbiBmcm9tIFwiQGF3cy1jZGsvYXdzLXN0ZXBmdW5jdGlvbnNcIjtcclxuaW1wb3J0ICogYXMgdGFza3MgZnJvbSBcIkBhd3MtY2RrL2F3cy1zdGVwZnVuY3Rpb25zLXRhc2tzXCI7XHJcbmltcG9ydCAqIGFzIGFwaWdhdGV3YXkgZnJvbSBcIkBhd3MtY2RrL2F3cy1hcGlnYXRld2F5XCJcclxuaW1wb3J0IHsgQXBpZ2F0ZXdheURhdGFDb25zdGFudHMgfSBmcm9tICcuLi9jb25zdGFudHMvQXBpR2F0ZXdheUNvbnN0YW50JztcclxuaW1wb3J0IHtcclxuICBXb3Jrc21hblRlcm1zQW5kQ29uZGl0aW9uc0FwaUdhdGV3YXksIFBvc3RVc2VyQXBpR2F0ZXdheSwgZ2V0QWxsTW9iaWxlTnVtYmVyc0FwaUdhdGV3YXksXHJcbiAgd29ya3NtYW5FeHBlcmllbmNlQXBpR2F0ZXdheSwgR2V0V29ya3NtYW5BY2NvdW50UmVnaXN0YXJ0aW9uU3RhdHVzQXBpR2F0ZXdheSwgR2V0VGVzdFVzZXJBcGlHYXRld2F5LFxyXG4gIEdldFdvcmttYW5EZXRhaWxzQXBpR2F0ZXdheSxcclxuICBVcGRhdGVXb3Jrc21hbkRldGFpbHNBcGlHYXRld2F5LFxyXG4gIFVzZXJQb3N0Q29kZXNBcGlHYXRld2F5LFxyXG4gIEdldEFsbFBvc3Rjb2Rlc0FwaUdhdGV3YXksXHJcbiAgRGVsZXRlUG9zdGNvZGVzQXBpR2F0ZXdheSxcclxuICBXb3Jrc21uYVNjaGVkdWxlQXBpR2F0ZXdheSxcclxuICBEZWxldGVXb3JrbWFuU2NoZWR1bGVBcGlHYXRld2F5LFxyXG4gIEdldFdvcmtzbWFuU2NoZWR1bGVBcGlHYXRld2F5LFxyXG4gIEdldFdvcmtzbWFuam9ic0FwaUdhdGV3YXksXHJcbiAgV29ya3NtYW5qb2JzQ3JlYXRlQXBpR2F0ZXdheSxcclxuICBHZXRNZXNzYWdlc0FwaUdhdGV3YXksXHJcbiAgQ3JlYXRlTWVzc2FnZXNBcGlHYXRld2F5LFxyXG4gIENyZWF0ZUJhbmtEZXRhaWxzQXBpR2F0ZXdheSxcclxuICBHZXRCYW5rRGV0YWlsc0FwaUdhdGV3YXksXHJcbiAgQ3JlYXRlQ3VzdG9tZXJUYWJsZUFwaUdhdGV3YXlcclxufSBmcm9tIFwiLi9yZXNvdXJjZXMvQXBpR2F0ZXdheS9BbGxBcGlHYXRlV2F5c1wiO1xyXG5pbXBvcnQgKiBhcyBhcGlHYXRld2F5QXV0aG9yaXplcnMgZnJvbSAnQGF3cy1jZGsvYXdzLWFwaWdhdGV3YXl2Mi1hdXRob3JpemVycyc7XHJcbmltcG9ydCAqIGFzIGFwaUdhdGV3YXlJbnRlZ3JhdGlvbnMgZnJvbSAnQGF3cy1jZGsvYXdzLWFwaWdhdGV3YXl2Mi1pbnRlZ3JhdGlvbnMnO1xyXG5pbXBvcnQgKiBhcyBjb2duaXRvIGZyb20gJ0Bhd3MtY2RrL2F3cy1jb2duaXRvJztcclxuXHJcbmV4cG9ydCBjbGFzcyBDZGtFeGFtcGxlU3RhY2sgZXh0ZW5kcyBjZGsuU3RhY2sge1xyXG4gIHB1YmxpYyBNYWNoaW5lOiBzZm4uU3RhdGVNYWNoaW5lO1xyXG4gIGNvbnN0cnVjdG9yKHNjb3BlOiBjZGsuQ29uc3RydWN0LCBpZDogc3RyaW5nLCBwcm9wcz86IGNkay5TdGFja1Byb3BzKSB7XHJcbiAgICBzdXBlcihzY29wZSwgaWQsIHByb3BzKTtcclxuXHJcbiAgICBjb25zdCB1c2VyUmVnaXN0cmF0aW9uID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCAnVXNlclJlZ2lzdHJhdGlvbicsIFVzZXJSZWdpc3RyYXRpb25MYW1iZGEoKSlcclxuICAgIGNvbnN0IFdvcmtzTWFuVGVybXNBbmRDb25kaXRpb24gPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsICdXb3Jrc01hblRlcm1zQW5kQ29uZGl0aW9uJywgV29ya3NNYW5UZXJtc0FuZENvbmRpdGlvbkxhbWJkYSgpKVxyXG4gICAgY29uc3QgV29ya3NNYW5FeHBlcmllbmNlID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCAnV29ya3NNYW5FeHBlcmllbmNlJywgV29ya3NNYW5FeHBlcmllbmNlTGFtYmRhKCkpXHJcbiAgICBjb25zdCBHZXRXb3Jrc21hbkFjY291bnRSZWdpc3RhcnRpb25TdGF0dXMgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsIFwiR2V0V29ya3NtYW5BY2NvdW50UmVnaXN0YXJ0aW9uU3RhdHVzXCIsIEdldFdvcmtzbWFuQWNjb3VudFJlZ2lzdGFydGlvblN0YXR1c0xhbWJkYSgpKVxyXG4gICAgY29uc3QgR2V0VGVzdFVzZXIgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsIFwiR2V0VGVzdFVzZXJcIiwgR2V0VGVzdFVzZXJMYW1iZGEoKSlcclxuICAgIGNvbnN0IFBvc3RUZXN0VXNlciA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJQb3N0VGVzdFVzZXJcIiwgUG9zdFRlc3RVc2VyTGFtYmRhKCkpXHJcbiAgICBjb25zdCBnZXRBbGxNb2JpbGVOdW1iZXJzRGVtbyA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJnZXRBbGxNb2JpbGVOdW1iZXJcIiwgZ2V0QWxsTW9iaWxlTnVtYmVyTGFtYmRhKCkpXHJcbiAgICBjb25zdCBHZXRXb3JrbWFuRGV0YWlsTGFtYmRhID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCBcIkdldFdvcmttYW5EZXRhaWxzXCIsIEdldFdvcmttYW5EZXRhaWxzTGFtYmRhKCkpXHJcbiAgICBjb25zdCBVcGRhdGVXb3Jrc21hbkRldGFpbExhbWJkYSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJVcGRhdGVXb3Jrc21hbkRldGFpbFwiLCBVcGRhdGVXb3Jrc21hbkRldGFpbHNMYW1iZGEoKSlcclxuICAgIGNvbnN0IFVzZXJQb3N0Q29kZUxhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJVc2VyUG9zdENvZGVzXCIsIFVzZXJQb3N0Q29kZXNMYW1iZGEoKSlcclxuICAgIGNvbnN0IEdldEFsbFBvc3Rjb2Rlc0xhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJHZXRBbGxQb3N0Y29kZXNcIiwgR2V0QWxsUG9zdGNvZGVzTGFtYmRhKCkpXHJcbiAgICBjb25zdCBEZWxldGVQb3N0Y29kZXNMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsIFwiRGVsZXRlUG9zdGNvZGVzXCIsIERlbGV0ZVBvc3Rjb2Rlc0xhbWJkYSgpKVxyXG4gICAgY29uc3QgV29ya3NtbmFTY2hlZHVsZUxhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJXb3Jrc21uYVNjaGVkdWxldGNvZGVzXCIsIFdvcmtzbW5hU2NoZWR1bGVMYW1iZGEoKSlcclxuICAgIGNvbnN0IERlbGV0ZVdvcmttYW5TY2hlZHVsZUxhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJEZWxldGVXb3JrbWFuU2NoZWR1bGVcIiwgRGVsZXRlV29ya21hblNjaGVkdWxlTGFtYmRhKCkpXHJcbiAgICBjb25zdCBHZXRXb3Jrc21hblNjaGVkdWxlTGFtYmRhQXBpID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCBcIkdldFdvcmtzbWFuU2NoZWR1bGVcIiwgR2V0V29ya3NtYW5TY2hlZHVsZXNMYW1iZGEoKSlcclxuICAgIGNvbnN0IEdldFdvcmtzbWFuam9ic0xhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJHZXRXb3Jrc21hbmpvYnNcIiwgR2V0V29ya3NtYW5qb2JzTGFtYmRhKCkpXHJcbiAgICBjb25zdCBXb3Jrc21hbmpvYnNDcmVhdGVMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsIFwiV29ya3NtYW5qb2JzQ3JlYXRlXCIsIFdvcmtzbWFuam9ic0NyZWF0ZUxhbWJkYSgpKVxyXG4gICAgY29uc3QgQ3JlYXRlQmFua0RldGFpbHNMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsIFwiQ3JlYXRlQmFua0RldGFpbHNcIiwgQ3JlYXRlQmFua0RldGFpbHNMYW1iZGEoKSlcclxuICAgIGNvbnN0IEdldEJhbmtEZXRhaWxzTGFtYmRhQXBpID0gbmV3IGxhbWJkYS5GdW5jdGlvbih0aGlzLCBcIkdldEJhbmtEZXRhaWxzXCIsIEdldEJhbmtEZXRhaWxzTGFtYmRhKCkpXHJcbiAgICBjb25zdCBDcmVhdGVNZXNzYWdlc0xhbWJkYUFwaSA9IG5ldyBsYW1iZGEuRnVuY3Rpb24odGhpcywgXCJDcmVhdGVNZXNzYWdlc1wiLCBDcmVhdGVNZXNzYWdlc0xhbWJkYSgpKVxyXG4gICAgY29uc3QgR2V0TWVzc2FnZXNMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsIFwiR2V0TWVzc2FnZXNcIiwgR2V0TWVzc2FnZXNMYW1iZGEoKSlcclxuICAgIGNvbnN0IENyZWF0ZUN1c3RvbWVyVGFibGVMYW1iZGFBcGkgPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHRoaXMsIFwiQ3JlYXRlQ3VzdG9tZXJUYWJsZVwiLCBDcmVhdGVDdXN0b21lclRhYmxlTGFtYmRhKCkpXHJcblxyXG4gICAgY29uc3QgYXBpID0gbmV3IGFwaWdhdGV3YXkuUmVzdEFwaSh0aGlzLCAnV29ya3NNYW5BcGlEZWZhdWx0JywgQXBpZ2F0ZXdheURhdGFDb25zdGFudHMoYXBpZ2F0ZXdheSkpO1xyXG5cclxuICAgIGNvbnN0IHVzZXJQb29sID0gbmV3IGNvZ25pdG8uVXNlclBvb2wodGhpcywgJ3VzZXJwb29sJywge1xyXG4gICAgICB1c2VyUG9vbE5hbWU6IGB2ay1jbGVhbi1wb3J0YWxgLFxyXG4gICAgICByZW1vdmFsUG9saWN5OiBjZGsuUmVtb3ZhbFBvbGljeS5ERVNUUk9ZLFxyXG4gICAgICBzZWxmU2lnblVwRW5hYmxlZDogdHJ1ZSxcclxuICAgICAgc2lnbkluQWxpYXNlczogeyBlbWFpbDogdHJ1ZSwgcGhvbmU6IHRydWUgfSxcclxuICAgICAgYXV0b1ZlcmlmeTogeyBlbWFpbDogdHJ1ZSB9LFxyXG4gICAgICBwYXNzd29yZFBvbGljeToge1xyXG4gICAgICAgIG1pbkxlbmd0aDogNixcclxuICAgICAgICByZXF1aXJlTG93ZXJjYXNlOiB0cnVlLFxyXG4gICAgICAgIHJlcXVpcmVEaWdpdHM6IHRydWUsXHJcbiAgICAgICAgcmVxdWlyZVVwcGVyY2FzZTogdHJ1ZSxcclxuICAgICAgICByZXF1aXJlU3ltYm9sczogdHJ1ZSxcclxuICAgICAgfSxcclxuICAgICBzdGFuZGFyZEF0dHJpYnV0ZXM6e1xyXG4gICAgICBnaXZlbk5hbWU6IHtcclxuICAgICAgICByZXF1aXJlZDp0cnVlLFxyXG4gICAgICAgIG11dGFibGU6dHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICBmYW1pbHlOYW1lOiB7XHJcbiAgICAgICAgcmVxdWlyZWQ6dHJ1ZSxcclxuICAgICAgICBtdXRhYmxlOnRydWVcclxuICAgICAgfSxcclxuICAgICAgZW1haWw6IHtcclxuICAgICAgICByZXF1aXJlZDp0cnVlLFxyXG4gICAgICAgIG11dGFibGU6dHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICBhZGRyZXNzOiB7XHJcbiAgICAgICAgcmVxdWlyZWQ6dHJ1ZSxcclxuICAgICAgICBtdXRhYmxlOnRydWVcclxuICAgICAgfSxcclxuICAgICAgYmlydGhkYXRlOiB7XHJcbiAgICAgICAgcmVxdWlyZWQ6dHJ1ZSxcclxuICAgICAgICBtdXRhYmxlOnRydWVcclxuICAgICAgfSxcclxuICAgICAgZ2VuZGVyOiB7XHJcbiAgICAgICAgcmVxdWlyZWQ6dHJ1ZSxcclxuICAgICAgICBtdXRhYmxlOnRydWVcclxuICAgICAgfSxcclxuICAgICAgbG9jYWxlOiB7XHJcbiAgICAgICAgcmVxdWlyZWQ6dHJ1ZSxcclxuICAgICAgICBtdXRhYmxlOnRydWVcclxuICAgICAgfSxcclxuICAgICAgcGhvbmVOdW1iZXI6IHtcclxuICAgICAgICByZXF1aXJlZDp0cnVlLFxyXG4gICAgICAgIG11dGFibGU6dHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgIH0sXHJcbiAgICAgIGFjY291bnRSZWNvdmVyeTogY29nbml0by5BY2NvdW50UmVjb3ZlcnkuRU1BSUxfT05MWSxcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBjb25zdCBzdGFuZGFyZENvZ25pdG9BdHRyaWJ1dGVzID0ge1xyXG4gICAgICBnaXZlbk5hbWU6IHRydWUsXHJcbiAgICAgIGZhbWlseU5hbWU6IHRydWUsXHJcbiAgICAgIGVtYWlsOiB0cnVlLFxyXG4gICAgICBhZGRyZXNzOiB0cnVlLFxyXG4gICAgICBiaXJ0aGRhdGU6IHRydWUsXHJcbiAgICAgIGdlbmRlcjogdHJ1ZSxcclxuICAgICAgbG9jYWxlOiB0cnVlLFxyXG4gICAgICBwaG9uZU51bWJlcjogdHJ1ZSxcclxuICAgIH07XHJcbiAgICBcclxuICAgIGNvbnN0IGNsaWVudFJlYWRBdHRyaWJ1dGVzID0gbmV3IGNvZ25pdG8uQ2xpZW50QXR0cmlidXRlcygpXHJcbiAgICAgIC53aXRoU3RhbmRhcmRBdHRyaWJ1dGVzKHN0YW5kYXJkQ29nbml0b0F0dHJpYnV0ZXMpXHJcbiAgICBcclxuICAgIGNvbnN0IGNsaWVudFdyaXRlQXR0cmlidXRlcyA9IG5ldyBjb2duaXRvLkNsaWVudEF0dHJpYnV0ZXMoKVxyXG4gICAgICAud2l0aFN0YW5kYXJkQXR0cmlidXRlcyh7XHJcbiAgICAgICAgLi4uc3RhbmRhcmRDb2duaXRvQXR0cmlidXRlcyxcclxuICAgICAgICBlbWFpbFZlcmlmaWVkOiBmYWxzZSxcclxuICAgICAgICBwaG9uZU51bWJlclZlcmlmaWVkOiBmYWxzZSxcclxuICAgICAgfSlcclxuXHJcblxyXG5cclxuICAgICAgY29uc3QgdXNlclBvb2xDbGllbnQgPSBuZXcgY29nbml0by5Vc2VyUG9vbENsaWVudCh0aGlzLCAndXNlcnBvb2wtY2xpZW50Jywge1xyXG4gICAgICAgIHVzZXJQb29sLFxyXG4gICAgICAgIGF1dGhGbG93czogeyAgXHJcbiAgICAgICAgICBhZG1pblVzZXJQYXNzd29yZDogdHJ1ZSxcclxuICAgICAgICAgIGN1c3RvbTogdHJ1ZSxcclxuICAgICAgICAgIHVzZXJTcnA6IHRydWUsXHJcbiAgICAgICAgICB1c2VyUGFzc3dvcmQ6dHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VwcG9ydGVkSWRlbnRpdHlQcm92aWRlcnM6IFtcclxuICAgICAgICAgIGNvZ25pdG8uVXNlclBvb2xDbGllbnRJZGVudGl0eVByb3ZpZGVyLkNPR05JVE8sXHJcbiAgICAgICAgXSxcclxuICAgICAgICByZWFkQXR0cmlidXRlczogY2xpZW50UmVhZEF0dHJpYnV0ZXMsXHJcbiAgICAgICAgd3JpdGVBdHRyaWJ1dGVzOiBjbGllbnRXcml0ZUF0dHJpYnV0ZXMsXHJcbiAgICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgbmV3IGNkay5DZm5PdXRwdXQodGhpcywgJ3JlZ2lvbicsIHsgdmFsdWU6IGNkay5TdGFjay5vZih0aGlzKS5yZWdpb24gfSk7XHJcbiAgICBuZXcgY2RrLkNmbk91dHB1dCh0aGlzLCAndXNlclBvb2xJZCcsIHsgdmFsdWU6IHVzZXJQb29sLnVzZXJQb29sSWQgfSk7XHJcbiAgICBuZXcgY2RrLkNmbk91dHB1dCh0aGlzLCAndXNlclBvb2xDbGllbnRJZCcsIHtcclxuICAgICAgdmFsdWU6IHVzZXJQb29sQ2xpZW50LnVzZXJQb29sQ2xpZW50SWQsXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgbmV3IGNkay5DZm5PdXRwdXQodGhpcywgJ2FwaVVybCcsIHsgdmFsdWU6IGFwaS51cmwgfSk7XHJcblxyXG5cclxuXHJcbiAgICBjb25zdCBhdXRoID0gbmV3IGFwaWdhdGV3YXkuQ29nbml0b1VzZXJQb29sc0F1dGhvcml6ZXIodGhpcywgJ0F1dGhvcml6ZXInLCB7XHJcbiAgICAgIGNvZ25pdG9Vc2VyUG9vbHM6IFt1c2VyUG9vbF1cclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgLy8gUE9TVCBBUElTXHJcbiAgICBXb3Jrc21hblRlcm1zQW5kQ29uZGl0aW9uc0FwaUdhdGV3YXkoYXBpLCBXb3Jrc01hblRlcm1zQW5kQ29uZGl0aW9uLCAnUE9TVCcsIGF1dGgpXHJcbiAgICB3b3Jrc21hbkV4cGVyaWVuY2VBcGlHYXRld2F5KGFwaSwgV29ya3NNYW5FeHBlcmllbmNlLCAnUE9TVCcsIGF1dGgpXHJcbiAgICBQb3N0VXNlckFwaUdhdGV3YXkoYXBpLCBQb3N0VGVzdFVzZXIsICdQT1NUJywgYXV0aClcclxuICAgIFVzZXJQb3N0Q29kZXNBcGlHYXRld2F5KGFwaSwgVXNlclBvc3RDb2RlTGFtYmRhQXBpLCAnUE9TVCcsIGF1dGgpXHJcbiAgICBXb3Jrc21uYVNjaGVkdWxlQXBpR2F0ZXdheShhcGksIFdvcmtzbW5hU2NoZWR1bGVMYW1iZGFBcGksICdQT1NUJywgYXV0aClcclxuICAgIFdvcmtzbWFuam9ic0NyZWF0ZUFwaUdhdGV3YXkoYXBpLCBXb3Jrc21hbmpvYnNDcmVhdGVMYW1iZGFBcGksICdQT1NUJywgYXV0aClcclxuICAgIENyZWF0ZUJhbmtEZXRhaWxzQXBpR2F0ZXdheShhcGksIENyZWF0ZUJhbmtEZXRhaWxzTGFtYmRhQXBpLCAnUE9TVCcsIGF1dGgpXHJcbiAgICBDcmVhdGVNZXNzYWdlc0FwaUdhdGV3YXkoYXBpLCBDcmVhdGVNZXNzYWdlc0xhbWJkYUFwaSwgJ1BPU1QnLCBhdXRoKVxyXG4gICAgQ3JlYXRlQ3VzdG9tZXJUYWJsZUFwaUdhdGV3YXkoYXBpLCBDcmVhdGVDdXN0b21lclRhYmxlTGFtYmRhQXBpLCAnUE9TVCcsIGF1dGgpXHJcblxyXG4gICAgLy8gR0VUIEFQSVNcclxuICAgIEdldFdvcmtzbWFuQWNjb3VudFJlZ2lzdGFydGlvblN0YXR1c0FwaUdhdGV3YXkoYXBpLCBHZXRXb3Jrc21hbkFjY291bnRSZWdpc3RhcnRpb25TdGF0dXMsICdHRVQnLCBhdXRoKVxyXG4gICAgR2V0VGVzdFVzZXJBcGlHYXRld2F5KGFwaSwgR2V0VGVzdFVzZXIsICdHRVQnLCBhdXRoKVxyXG4gICAgZ2V0QWxsTW9iaWxlTnVtYmVyc0FwaUdhdGV3YXkoYXBpLCBnZXRBbGxNb2JpbGVOdW1iZXJzRGVtbywgJ0dFVCcpXHJcbiAgICBHZXRXb3JrbWFuRGV0YWlsc0FwaUdhdGV3YXkoYXBpLCBHZXRXb3JrbWFuRGV0YWlsTGFtYmRhLCAnR0VUJywgYXV0aClcclxuICAgIEdldEFsbFBvc3Rjb2Rlc0FwaUdhdGV3YXkoYXBpLCBHZXRBbGxQb3N0Y29kZXNMYW1iZGFBcGksICdHRVQnLCBhdXRoKVxyXG4gICAgR2V0V29ya3NtYW5TY2hlZHVsZUFwaUdhdGV3YXkoYXBpLCBHZXRXb3Jrc21hblNjaGVkdWxlTGFtYmRhQXBpLCAnR0VUJywgYXV0aClcclxuICAgIEdldFdvcmtzbWFuam9ic0FwaUdhdGV3YXkoYXBpLCBHZXRXb3Jrc21hbmpvYnNMYW1iZGFBcGksICdHRVQnLCBhdXRoKVxyXG4gICAgR2V0QmFua0RldGFpbHNBcGlHYXRld2F5KGFwaSwgR2V0QmFua0RldGFpbHNMYW1iZGFBcGksICdHRVQnLCBhdXRoKVxyXG4gICAgR2V0TWVzc2FnZXNBcGlHYXRld2F5KGFwaSwgR2V0TWVzc2FnZXNMYW1iZGFBcGksICdHRVQnLCBhdXRoKVxyXG5cclxuICAgIC8vIERFTEVURSBBUElTXHJcbiAgICBEZWxldGVQb3N0Y29kZXNBcGlHYXRld2F5KGFwaSwgRGVsZXRlUG9zdGNvZGVzTGFtYmRhQXBpLCAnREVMRVRFJywgYXV0aClcclxuICAgIERlbGV0ZVdvcmttYW5TY2hlZHVsZUFwaUdhdGV3YXkoYXBpLCBEZWxldGVXb3JrbWFuU2NoZWR1bGVMYW1iZGFBcGksICdERUxFVEUnLCBhdXRoKVxyXG5cclxuICAgIC8vIFVQREFURSBBUElTXHJcbiAgICBVcGRhdGVXb3Jrc21hbkRldGFpbHNBcGlHYXRld2F5KGFwaSwgVXBkYXRlV29ya3NtYW5EZXRhaWxMYW1iZGEsICdQVVQnLCBhdXRoKVxyXG5cclxuICB9XHJcbn0iXX0=